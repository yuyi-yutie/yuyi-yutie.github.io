<!DOCTYPE html>
<html lang="zh-cn" dir="ltr"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="robots" content="noindex, nofollow" />
  <link rel="icon shortcut" href="/favicon.ico" sizes="32x32" />
<link rel="icon" href="/favicon.svg" type="image/svg+xml" id="favicon-svg" />
<link rel="icon" href="/favicon-16x16.png" type="image/png" sizes="16x16" />
<link rel="icon" href="/favicon-32x32.png" type="image/png" sizes="32x32" />
<link rel="apple-touch-icon" href="/apple-touch-icon.png" sizes="180x180" />
<link fetchpriority="low" href="/site.webmanifest" rel="manifest" />
<title>基于Godot的A*寻路算法 – 乂轶·轶名_yy</title>
  <meta name="description" content="以下写的是四连通的情况，但其实完全可以类推到六连通和八连通
首先是Astar寻路的四个要点：
寻路消耗公式f = g &#43; h（虽然我并不知道为什么一定是这三个字母而不是a = b &#43; c） open开启列表 close关闭列表 反向遍历 寻路消耗公式 f = g &#43; h
其中，f为寻路消耗，g为起点到计算点的切比雪夫距离，h为计算点到终点的曼哈顿距离
为什么是切比雪夫距离？经典的版本是欧氏距离，但依旧如题，这里要涉及到消耗，所以我会更偏向使用切比雪夫距离，下方解释一下三个距离
三个距离 欧几里得距离（欧氏距离）的计算公式是横坐标差的平方加纵坐标差的平方的和开根号，当对ai体的灵活度有要求时，就会用这个距离代表g
曼哈顿距离的计算公式是横坐标差的绝对值加纵坐标差的绝对值，一般用来衡量计算点到终点的远近
切比雪夫距离没有很明确的计算公式，如果非要有的话那应该就是对经过的所有格子的消耗求和，所以一般说到消耗都是切比雪夫距离
open开启列表和close关闭列表 open用来存储已访问但未放入路径的格子，close用来存储放入路径的格子，Astar计算出的路径就是close的子集
open通常需要包含的数据有：计算格父级的坐标，计算格的f，g，h，计算格的坐标 close需要包含的数据有：计算格父级的坐标，计算格的坐标
实现理论过程 前提：假设所有格子都继承于一个类Grid(父类是Node2D)，访问格子时可以访问到它的坐标，移动消耗，同时有一个格子管理器GridManager(父类是Node)，所有格子都是这个管理器的子节点
我们要求Astar脚本的核心功能：输入起点和终点坐标，格子管理器的引用，若寻路成功，输出下一步要移动到的格子坐标
步骤如下：
把起点放入开启列表中 开始循环，在开启列表中寻找f最小的最优格，将其放入关闭列表，并从开启列表中移除（可能会存在有几个格子的情况，所以这里存储找到的格子需要是一个列表，但返回到后续过程的结果一定是一个格子，假如f相同就找h，再相同就找g，再相同就随机） 遍历最优格四连通区域的格子，将这些格子放入开启列表中（需要注意一下放入到开启列表中的元素，最优格的坐标会作为这些放入开启列表的格子的父级坐标一并放进去） 持续循环，直到开启列表为空或最优格为终点，若开启列表为空，则返回寻路失败，若最优格为终点，则寻路成功，则将终点放入关闭列表并结束循环 反向遍历，从关闭列表的最后一个元素（即终点）开始，访问其计算格父级坐标，与关闭列表中元素的计算格坐标比对，以此找到其父级，以此循环，知道访问到父级坐标为起点坐标时结束遍历，返回计算格坐标，即为输出 代码实现 (约定地图起始格子坐标为(0,0)，那么(-1,-1)格即为不存在格，用作初始化)
首先我们需要明确一下格子类内包含的变量是哪些
extends Node_2D class_name Grid var index : Vector2i var cost : float var parent : GridManager func initialize(parameter : GridManager) -&gt; void: parent = parameter #这里是依赖注入的写法，写习惯了带一笔 接下来是GridManager的脚本，A*算法主要得从这里根据坐标返回格子对象" /><link rel="canonical" href="http://localhost:1313/tech/godot_a_star/" itemprop="url" />

<meta property="og:title" content="基于Godot的A*寻路算法">
<meta
  property="og:description"
  content="
    
      以下写的是四连通的情况，但其实完全可以类推到六连通和八连通
首先是Astar寻路的四个要点：

寻路消耗公式f = g &#43; h（虽然我并不知道为什么一定是这三个字母而不是a = b &#43; c）
open开启列表
close关闭列表
反向遍历

寻路消耗公式
    f = g &#43; h
其中，f为寻路消耗，g为起点到计算点的切比雪夫距离，h为计算点到终点的曼哈顿距离
为什么是切比雪夫距离？经典的版本是欧氏距离，但依旧如题，这里要涉及到消耗，所以我会更偏向使用切比雪夫距离，下方解释一下三个距离
三个距离
    欧几里得距离（欧氏距离）的计算公式是横坐标差的平方加纵坐标差的平方的和开根号，当对ai体的灵活度有要求时，就会用这个距离代表g
曼哈顿距离的计算公式是横坐标差的绝对值加纵坐标差的绝对值，一般用来衡量计算点到终点的远近
切比雪夫距离没有很明确的计算公式，如果非要有的话那应该就是对经过的所有格子的消耗求和，所以一般说到消耗都是切比雪夫距离
open开启列表和close关闭列表
    open用来存储已访问但未放入路径的格子，close用来存储放入路径的格子，Astar计算出的路径就是close的子集
open通常需要包含的数据有：计算格父级的坐标，计算格的f，g，h，计算格的坐标
close需要包含的数据有：计算格父级的坐标，计算格的坐标
实现理论过程
    前提：假设所有格子都继承于一个类Grid(父类是Node2D)，访问格子时可以访问到它的坐标，移动消耗，同时有一个格子管理器GridManager(父类是Node)，所有格子都是这个管理器的子节点
我们要求Astar脚本的核心功能：输入起点和终点坐标，格子管理器的引用，若寻路成功，输出下一步要移动到的格子坐标
步骤如下：

把起点放入开启列表中
开始循环，在开启列表中寻找f最小的最优格，将其放入关闭列表，并从开启列表中移除（可能会存在有几个格子的情况，所以这里存储找到的格子需要是一个列表，但返回到后续过程的结果一定是一个格子，假如f相同就找h，再相同就找g，再相同就随机）
遍历最优格四连通区域的格子，将这些格子放入开启列表中（需要注意一下放入到开启列表中的元素，最优格的坐标会作为这些放入开启列表的格子的父级坐标一并放进去）
持续循环，直到开启列表为空或最优格为终点，若开启列表为空，则返回寻路失败，若最优格为终点，则寻路成功，则将终点放入关闭列表并结束循环
反向遍历，从关闭列表的最后一个元素（即终点）开始，访问其计算格父级坐标，与关闭列表中元素的计算格坐标比对，以此找到其父级，以此循环，知道访问到父级坐标为起点坐标时结束遍历，返回计算格坐标，即为输出

代码实现
    (约定地图起始格子坐标为(0,0)，那么(-1,-1)格即为不存在格，用作初始化)
首先我们需要明确一下格子类内包含的变量是哪些


extends Node_2D
class_name Grid

var index : Vector2i
var cost : float
var parent : GridManager

func initialize(parameter : GridManager) -&gt; void:
	parent = parameter
	#这里是依赖注入的写法，写习惯了带一笔
  
    

  


接下来是GridManager的脚本，A*算法主要得从这里根据坐标返回格子对象
    
  ">
<meta
  property="og:type"
  content="
    article
  ">
<meta property="og:url" content="http://localhost:1313/tech/godot_a_star/"><meta property="article:section" content="tech">

<meta
  property="article:published_time"
  content="2025-12-03T00:00:00+00:00">


<meta
  property="article:modified_time"
  content="2025-12-03T00:00:00+00:00">



  <meta itemprop="name" content="基于Godot的A*寻路算法">
  <meta itemprop="description" content="以下写的是四连通的情况，但其实完全可以类推到六连通和八连通
首先是Astar寻路的四个要点：
寻路消耗公式f = g &#43; h（虽然我并不知道为什么一定是这三个字母而不是a = b &#43; c） open开启列表 close关闭列表 反向遍历 寻路消耗公式 f = g &#43; h
其中，f为寻路消耗，g为起点到计算点的切比雪夫距离，h为计算点到终点的曼哈顿距离
为什么是切比雪夫距离？经典的版本是欧氏距离，但依旧如题，这里要涉及到消耗，所以我会更偏向使用切比雪夫距离，下方解释一下三个距离
三个距离 欧几里得距离（欧氏距离）的计算公式是横坐标差的平方加纵坐标差的平方的和开根号，当对ai体的灵活度有要求时，就会用这个距离代表g
曼哈顿距离的计算公式是横坐标差的绝对值加纵坐标差的绝对值，一般用来衡量计算点到终点的远近
切比雪夫距离没有很明确的计算公式，如果非要有的话那应该就是对经过的所有格子的消耗求和，所以一般说到消耗都是切比雪夫距离
open开启列表和close关闭列表 open用来存储已访问但未放入路径的格子，close用来存储放入路径的格子，Astar计算出的路径就是close的子集
open通常需要包含的数据有：计算格父级的坐标，计算格的f，g，h，计算格的坐标 close需要包含的数据有：计算格父级的坐标，计算格的坐标
实现理论过程 前提：假设所有格子都继承于一个类Grid(父类是Node2D)，访问格子时可以访问到它的坐标，移动消耗，同时有一个格子管理器GridManager(父类是Node)，所有格子都是这个管理器的子节点
我们要求Astar脚本的核心功能：输入起点和终点坐标，格子管理器的引用，若寻路成功，输出下一步要移动到的格子坐标
步骤如下：
把起点放入开启列表中 开始循环，在开启列表中寻找f最小的最优格，将其放入关闭列表，并从开启列表中移除（可能会存在有几个格子的情况，所以这里存储找到的格子需要是一个列表，但返回到后续过程的结果一定是一个格子，假如f相同就找h，再相同就找g，再相同就随机） 遍历最优格四连通区域的格子，将这些格子放入开启列表中（需要注意一下放入到开启列表中的元素，最优格的坐标会作为这些放入开启列表的格子的父级坐标一并放进去） 持续循环，直到开启列表为空或最优格为终点，若开启列表为空，则返回寻路失败，若最优格为终点，则寻路成功，则将终点放入关闭列表并结束循环 反向遍历，从关闭列表的最后一个元素（即终点）开始，访问其计算格父级坐标，与关闭列表中元素的计算格坐标比对，以此找到其父级，以此循环，知道访问到父级坐标为起点坐标时结束遍历，返回计算格坐标，即为输出 代码实现 (约定地图起始格子坐标为(0,0)，那么(-1,-1)格即为不存在格，用作初始化)
首先我们需要明确一下格子类内包含的变量是哪些
extends Node_2D class_name Grid var index : Vector2i var cost : float var parent : GridManager func initialize(parameter : GridManager) -&gt; void: parent = parameter #这里是依赖注入的写法，写习惯了带一笔 接下来是GridManager的脚本，A*算法主要得从这里根据坐标返回格子对象">
  <meta itemprop="datePublished" content="2025-12-03T00:00:00+00:00">
  <meta itemprop="dateModified" content="2025-12-03T00:00:00+00:00">
  <meta itemprop="wordCount" content="506">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="基于Godot的A*寻路算法">
  <meta name="twitter:description" content="以下写的是四连通的情况，但其实完全可以类推到六连通和八连通
首先是Astar寻路的四个要点：
寻路消耗公式f = g &#43; h（虽然我并不知道为什么一定是这三个字母而不是a = b &#43; c） open开启列表 close关闭列表 反向遍历 寻路消耗公式 f = g &#43; h
其中，f为寻路消耗，g为起点到计算点的切比雪夫距离，h为计算点到终点的曼哈顿距离
为什么是切比雪夫距离？经典的版本是欧氏距离，但依旧如题，这里要涉及到消耗，所以我会更偏向使用切比雪夫距离，下方解释一下三个距离
三个距离 欧几里得距离（欧氏距离）的计算公式是横坐标差的平方加纵坐标差的平方的和开根号，当对ai体的灵活度有要求时，就会用这个距离代表g
曼哈顿距离的计算公式是横坐标差的绝对值加纵坐标差的绝对值，一般用来衡量计算点到终点的远近
切比雪夫距离没有很明确的计算公式，如果非要有的话那应该就是对经过的所有格子的消耗求和，所以一般说到消耗都是切比雪夫距离
open开启列表和close关闭列表 open用来存储已访问但未放入路径的格子，close用来存储放入路径的格子，Astar计算出的路径就是close的子集
open通常需要包含的数据有：计算格父级的坐标，计算格的f，g，h，计算格的坐标 close需要包含的数据有：计算格父级的坐标，计算格的坐标
实现理论过程 前提：假设所有格子都继承于一个类Grid(父类是Node2D)，访问格子时可以访问到它的坐标，移动消耗，同时有一个格子管理器GridManager(父类是Node)，所有格子都是这个管理器的子节点
我们要求Astar脚本的核心功能：输入起点和终点坐标，格子管理器的引用，若寻路成功，输出下一步要移动到的格子坐标
步骤如下：
把起点放入开启列表中 开始循环，在开启列表中寻找f最小的最优格，将其放入关闭列表，并从开启列表中移除（可能会存在有几个格子的情况，所以这里存储找到的格子需要是一个列表，但返回到后续过程的结果一定是一个格子，假如f相同就找h，再相同就找g，再相同就随机） 遍历最优格四连通区域的格子，将这些格子放入开启列表中（需要注意一下放入到开启列表中的元素，最优格的坐标会作为这些放入开启列表的格子的父级坐标一并放进去） 持续循环，直到开启列表为空或最优格为终点，若开启列表为空，则返回寻路失败，若最优格为终点，则寻路成功，则将终点放入关闭列表并结束循环 反向遍历，从关闭列表的最后一个元素（即终点）开始，访问其计算格父级坐标，与关闭列表中元素的计算格坐标比对，以此找到其父级，以此循环，知道访问到父级坐标为起点坐标时结束遍历，返回计算格坐标，即为输出 代码实现 (约定地图起始格子坐标为(0,0)，那么(-1,-1)格即为不存在格，用作初始化)
首先我们需要明确一下格子类内包含的变量是哪些
extends Node_2D class_name Grid var index : Vector2i var cost : float var parent : GridManager func initialize(parameter : GridManager) -&gt; void: parent = parameter #这里是依赖注入的写法，写习惯了带一笔 接下来是GridManager的脚本，A*算法主要得从这里根据坐标返回格子对象">
<link href="/css/compiled/main.css" rel="stylesheet" />
    <link href="/css/variables.css" rel="stylesheet" />
    <link href="/css/custom.css" rel="stylesheet" />

  
<script src="/js/main-head.js" integrity=""></script>

  
  
  </head>
<body>
    <a href="#content" class="hx:sr-only hx:focus-visible:not-sr-only hx:focus-visible:fixed hx:focus-visible:z-50 hx:focus-visible:top-2 hx:focus-visible:left-2 hx:focus-visible:bg-primary-500 hx:focus-visible:text-white hx:focus-visible:px-4 hx:focus-visible:py-2 hx:focus-visible:rounded-md hx:focus-visible:text-sm hx:focus-visible:font-medium">跳至内容</a>
<div class="hextra-banner hx:max-md:sticky hx:top-0 hx:z-20 hx:px-6 hx:text-center hx:text-slate-50 hx:dark:text-white hx:bg-neutral-900 hx:dark:bg-neutral-800 hx:print:[display:none]">
  <div class="hx:relative hx:flex hx:items-center hx:justify-center hx:font-medium hx:text-sm hx:py-2.5"><div style="white-space: pre-wrap" class="hx:px-8">Welcome 🎉 Last updated date -&gt; 2026-02-16</div><button
      class="hextra-banner-close-button hx:cursor-pointer hx:absolute hx:right-0 hx:text-white hx:font-bold hx:leading-none hx:hover:opacity-75 hx:transition hx:w-10 hx:h-10 hx:-mr-2 hx:md:mr-0 hx:flex hx:items-center hx:justify-center"
      aria-label="关闭横幅"
    ><svg height=16 xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"/></svg></button>
  </div>
</div><div class="hextra-nav-container hx:sticky hx:top-0 hx:z-20 hx:w-full hx:bg-transparent hx:print:hidden">
  <div
    class="hextra-nav-container-blur hx:pointer-events-none hx:absolute hx:z-[-1] hx:h-full hx:w-full hx:bg-white hx:dark:bg-dark hx:shadow-[0_2px_4px_rgba(0,0,0,.02),0_1px_0_rgba(0,0,0,.06)] hx:contrast-more:shadow-[0_0_0_1px_#000] hx:dark:shadow-[0_-1px_0_rgba(255,255,255,.1)_inset] hx:contrast-more:dark:shadow-[0_0_0_1px_#fff]"
  ></div>

  <nav class="hextra-max-navbar-width hx:mx-auto hx:flex hx:items-center hx:justify-end hx:gap-2 hx:h-16 hx:px-6">
    <a class="hx:flex hx:items-center hx:hover:opacity-75 hx:ltr:mr-auto hx:rtl:ml-auto" href="/">
    <img class="hx:mr-2 hx:block hx:dark:hidden" src="/images/logo.svg" alt="Logo" height="20" width="20" />
    <img class="hx:mr-2 hx:hidden hx:dark:block" src="/images/logo.svg" alt="Dark Logo" height="20" width="20" />
    <span class="hx:mr-2 hx:font-extrabold hx:inline hx:select-none">乂轶·轶名_yy</span>
</a>
<a
  title=""
  href="/essay"
  
  class="hx:text-sm hx:contrast-more:text-gray-700 hx:contrast-more:dark:text-gray-100 hx:relative hx:-ml-2 hx:hidden hx:whitespace-nowrap hx:p-2 hx:md:inline-flex hx:items-center hx:gap-1 hx:text-gray-600 hx:hover:text-gray-800 hx:dark:text-gray-400 hx:dark:hover:text-gray-200"
><span class="hx:text-center">随笔</span>
</a><div class="hx:relative hx:hidden hx:md:inline-block">
  <button
    title="长篇"
    data-state="closed"
    class="hextra-nav-menu-toggle hx:cursor-pointer hx:text-sm hx:contrast-more:text-gray-700 hx:contrast-more:dark:text-gray-100 hx:relative hx:-ml-2 hx:whitespace-nowrap hx:p-2 hx:flex hx:items-center hx:gap-1 hx:text-gray-600 hx:hover:text-gray-800 hx:dark:text-gray-400 hx:dark:hover:text-gray-200"
    type="button"
    aria-label="长篇"
    aria-expanded="false"
    aria-haspopup="menu"
  ><span class="hx:text-center">长篇</span><svg height=12 class="hx:transition-transform hx:duration-200 hx:ease-in-out" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/></svg></button>
  <ul
    class="hextra-nav-menu-items hx:hidden hx:z-20 hx:max-h-64 hx:overflow-auto hx:rounded-lg hx:border hx:border-gray-200 hx:bg-white hx:p-1 hx:text-sm hx:shadow-lg hx:dark:border-neutral-700 hx:dark:bg-neutral-900"
    style="min-width: 100px;"
    role="menu"
  >
    <li role="none" class="hextra-nav-menu-item hx:flex hx:flex-col">
      <a
        href="/dae"
        
        role="menuitem"
        class="hx:text-gray-600 hx:hover:text-gray-800 hx:dark:text-gray-400 hx:dark:hover:text-gray-200 hx:relative hx:cursor-pointer hx:whitespace-nowrap hx:rounded-sm hx:py-1.5 hx:transition-colors hx:ltr:pl-3 hx:ltr:pr-9 hx:rtl:pr-3 hx:rtl:pl-9 hx:flex hx:items-center hx:gap-1 hx:hover:bg-gray-100 hx:dark:hover:bg-neutral-800"
      >王朝与帝国</a>
    </li><li role="none" class="hextra-nav-menu-item hx:flex hx:flex-col">
      <a
        href="/before18"
        
        role="menuitem"
        class="hx:text-gray-600 hx:hover:text-gray-800 hx:dark:text-gray-400 hx:dark:hover:text-gray-200 hx:relative hx:cursor-pointer hx:whitespace-nowrap hx:rounded-sm hx:py-1.5 hx:transition-colors hx:ltr:pl-3 hx:ltr:pr-9 hx:rtl:pr-3 hx:rtl:pl-9 hx:flex hx:items-center hx:gap-1 hx:hover:bg-gray-100 hx:dark:hover:bg-neutral-800"
      >自传：18岁前的"我"们</a>
    </li></ul>
</div><a
  title=""
  href="/game"
  
  class="hx:text-sm hx:contrast-more:text-gray-700 hx:contrast-more:dark:text-gray-100 hx:relative hx:-ml-2 hx:hidden hx:whitespace-nowrap hx:p-2 hx:md:inline-flex hx:items-center hx:gap-1 hx:text-gray-600 hx:hover:text-gray-800 hx:dark:text-gray-400 hx:dark:hover:text-gray-200"
><span class="hx:text-center">游戏</span>
</a><a
  title=""
  href="/tech"
  
  class="hx:text-sm hx:contrast-more:text-gray-700 hx:contrast-more:dark:text-gray-100 hx:relative hx:-ml-2 hx:hidden hx:whitespace-nowrap hx:p-2 hx:md:inline-flex hx:items-center hx:gap-1 hx:font-medium"
><span class="hx:text-center">技术</span>
</a><a
  title=""
  href="/about"
  
  class="hx:text-sm hx:contrast-more:text-gray-700 hx:contrast-more:dark:text-gray-100 hx:relative hx:-ml-2 hx:hidden hx:whitespace-nowrap hx:p-2 hx:md:inline-flex hx:items-center hx:gap-1 hx:text-gray-600 hx:hover:text-gray-800 hx:dark:text-gray-400 hx:dark:hover:text-gray-200"
><span class="hx:text-center">关于</span>
</a><div class="hextra-search-wrapper hx:relative hx:md:w-64">
  <div class="hx:relative hx:flex hx:items-center hx:text-gray-900 hx:contrast-more:text-gray-800 hx:dark:text-gray-300 hx:contrast-more:dark:text-gray-300">
    <input
      placeholder="搜索文档..."
      aria-label="搜索文档..."
      class="hextra-search-input hx:hextra-focus-visible hx:block hx:w-full hx:appearance-none hx:rounded-lg hx:px-3 hx:py-2 hx:transition-colors hx:text-base hx:leading-tight hx:md:text-sm hx:bg-black/[.05] hx:dark:bg-gray-50/10 hx:focus-visible:bg-white hx:dark:focus-visible:bg-dark hx:placeholder:text-gray-500 hx:dark:placeholder:text-gray-400 hx:contrast-more:border hx:contrast-more:border-current"
      type="search"
      autocomplete="off"
      value=""
      spellcheck="false"
    />
    <kbd
      class="hx:absolute hx:my-1.5 hx:select-none hx:ltr:right-1.5 hx:rtl:left-1.5 hx:h-5 hx:rounded-sm hx:bg-white hx:px-1.5 hx:font-mono hx:text-[10px] hx:font-medium hx:text-gray-500 hx:border hx:border-gray-200 hx:dark:border-gray-100/20 hx:dark:bg-dark/50 hx:contrast-more:border-current hx:contrast-more:text-current hx:contrast-more:dark:border-current hx:items-center hx:gap-1 hx:transition-opacity hx:pointer-events-none hx:hidden hx:sm:flex"
    >
      CTRL K
    </kbd>
  </div>

  <div>
    <ul
      class="hextra-search-results hextra-scrollbar hx:hidden hx:border hx:border-gray-200 hx:bg-white hx:text-gray-100 hx:dark:border-neutral-800 hx:dark:bg-neutral-900 hx:absolute hx:top-full hx:z-20 hx:mt-2 hx:overflow-auto hx:overscroll-contain hx:rounded-xl hx:py-2.5 hx:shadow-xl hx:max-h-[min(calc(50vh-11rem-env(safe-area-inset-bottom)),400px)] hx:md:max-h-[min(calc(100vh-5rem-env(safe-area-inset-bottom)),400px)] hx:inset-x-0 hx:ltr:md:left-auto hx:rtl:md:right-auto hx:contrast-more:border hx:contrast-more:border-gray-900 hx:contrast-more:dark:border-gray-50 hx:w-screen hx:min-h-[100px] hx:max-w-[min(calc(100vw-2rem),calc(100%+20rem))]"
      aria-label="搜索结果"
      style="transition: max-height 0.2s ease 0s;"
    ></ul>
    <div class="hextra-search-status hx:sr-only" aria-live="polite" role="status"></div>
  </div>
</div>

          <a class="hx:p-2 hx:text-current" target="_blank" rel="noreferrer" href="https://github.com/yuyi-yutie" title="GitHub"><svg height=24 fill="currentColor" viewBox="3 3 18 18">
  <path d="M12 3C7.0275 3 3 7.12937 3 12.2276C3 16.3109 5.57625 19.7597 9.15374 20.9824C9.60374 21.0631 9.77249 20.7863 9.77249 20.5441C9.77249 20.3249 9.76125 19.5982 9.76125 18.8254C7.5 19.2522 6.915 18.2602 6.735 17.7412C6.63375 17.4759 6.19499 16.6569 5.8125 16.4378C5.4975 16.2647 5.0475 15.838 5.80124 15.8264C6.51 15.8149 7.01625 16.4954 7.18499 16.7723C7.99499 18.1679 9.28875 17.7758 9.80625 17.5335C9.885 16.9337 10.1212 16.53 10.38 16.2993C8.3775 16.0687 6.285 15.2728 6.285 11.7432C6.285 10.7397 6.63375 9.9092 7.20749 9.26326C7.1175 9.03257 6.8025 8.08674 7.2975 6.81794C7.2975 6.81794 8.05125 6.57571 9.77249 7.76377C10.4925 7.55615 11.2575 7.45234 12.0225 7.45234C12.7875 7.45234 13.5525 7.55615 14.2725 7.76377C15.9937 6.56418 16.7475 6.81794 16.7475 6.81794C17.2424 8.08674 16.9275 9.03257 16.8375 9.26326C17.4113 9.9092 17.76 10.7281 17.76 11.7432C17.76 15.2843 15.6563 16.0687 13.6537 16.2993C13.98 16.5877 14.2613 17.1414 14.2613 18.0065C14.2613 19.2407 14.25 20.2326 14.25 20.5441C14.25 20.7863 14.4188 21.0746 14.8688 20.9824C16.6554 20.364 18.2079 19.1866 19.3078 17.6162C20.4077 16.0457 20.9995 14.1611 21 12.2276C21 7.12937 16.9725 3 12 3Z"></path>
</svg>
<span class="hx:sr-only">GitHub</span>
          </a><button type="button" aria-label="菜单" aria-expanded="false" class="hextra-hamburger-menu hx:cursor-pointer hx:-mr-2 hx:rounded-sm hx:p-2 hx:active:bg-gray-400/20 hx:md:hidden hx:hextra-focus-visible-inset"><svg height=24 fill="none" viewBox="0 0 24 24" stroke="currentColor"><g><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 8H20"></path></g><g><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16H20"></path></g></svg></button>
  </nav>
</div>

  <div class='hx:mx-auto hx:flex hextra-max-page-width'>
    <aside class="hextra-sidebar-container hx:flex hx:flex-col hx:print:hidden hx:md:top-16 hx:md:shrink-0 hx:md:w-64 hx:md:self-start hx:max-md:[transform:translate3d(0,-100%,0)] hx:md:sticky">
    <div class="hx:px-4 hx:pt-4 hx:md:hidden">
      <div class="hextra-search-wrapper hx:relative hx:md:w-64">
  <div class="hx:relative hx:flex hx:items-center hx:text-gray-900 hx:contrast-more:text-gray-800 hx:dark:text-gray-300 hx:contrast-more:dark:text-gray-300">
    <input
      placeholder="搜索文档..."
      aria-label="搜索文档..."
      class="hextra-search-input hx:hextra-focus-visible hx:block hx:w-full hx:appearance-none hx:rounded-lg hx:px-3 hx:py-2 hx:transition-colors hx:text-base hx:leading-tight hx:md:text-sm hx:bg-black/[.05] hx:dark:bg-gray-50/10 hx:focus-visible:bg-white hx:dark:focus-visible:bg-dark hx:placeholder:text-gray-500 hx:dark:placeholder:text-gray-400 hx:contrast-more:border hx:contrast-more:border-current"
      type="search"
      autocomplete="off"
      value=""
      spellcheck="false"
    />
    <kbd
      class="hx:absolute hx:my-1.5 hx:select-none hx:ltr:right-1.5 hx:rtl:left-1.5 hx:h-5 hx:rounded-sm hx:bg-white hx:px-1.5 hx:font-mono hx:text-[10px] hx:font-medium hx:text-gray-500 hx:border hx:border-gray-200 hx:dark:border-gray-100/20 hx:dark:bg-dark/50 hx:contrast-more:border-current hx:contrast-more:text-current hx:contrast-more:dark:border-current hx:items-center hx:gap-1 hx:transition-opacity hx:pointer-events-none hx:hidden hx:sm:flex"
    >
      CTRL K
    </kbd>
  </div>

  <div>
    <ul
      class="hextra-search-results hextra-scrollbar hx:hidden hx:border hx:border-gray-200 hx:bg-white hx:text-gray-100 hx:dark:border-neutral-800 hx:dark:bg-neutral-900 hx:absolute hx:top-full hx:z-20 hx:mt-2 hx:overflow-auto hx:overscroll-contain hx:rounded-xl hx:py-2.5 hx:shadow-xl hx:max-h-[min(calc(50vh-11rem-env(safe-area-inset-bottom)),400px)] hx:md:max-h-[min(calc(100vh-5rem-env(safe-area-inset-bottom)),400px)] hx:inset-x-0 hx:ltr:md:left-auto hx:rtl:md:right-auto hx:contrast-more:border hx:contrast-more:border-gray-900 hx:contrast-more:dark:border-gray-50 hx:w-screen hx:min-h-[100px] hx:max-w-[min(calc(100vw-2rem),calc(100%+20rem))]"
      aria-label="搜索结果"
      style="transition: max-height 0.2s ease 0s;"
    ></ul>
    <div class="hextra-search-status hx:sr-only" aria-live="polite" role="status"></div>
  </div>
</div>

    </div><div class="hextra-scrollbar hx:overflow-y-auto hx:overflow-x-hidden hx:p-4 hx:grow hx:md:h-[calc(100vh-var(--navbar-height)-var(--menu-height))]">
    <ul class="hx:flex hx:flex-col hx:gap-1 hx:md:hidden">
      
      
          <li class=""><div class="hextra-sidebar-item hx:group hx:relative hx:flex hx:items-center" data-active="false">
    <a
      class="hx:flex hx:items-center hx:justify-between hx:gap-2 hx:grow hx:cursor-pointer hx:rounded-sm hx:px-2 hx:py-1.5 hx:text-sm hx:transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] hx:ltr:pr-8 hx:rtl:pl-8
      hx:hextra-focus-visible-inset
        hx:text-gray-500 hx:hover:bg-gray-100 hx:hover:text-gray-900 hx:contrast-more:border hx:contrast-more:border-transparent hx:contrast-more:text-gray-900 hx:contrast-more:hover:border-gray-900 hx:dark:text-neutral-400 hx:dark:hover:bg-primary-100/5 hx:dark:hover:text-gray-50 hx:contrast-more:dark:text-gray-50 hx:contrast-more:dark:hover:border-gray-50"
      href="/essay/"
      
    >
      <span class="hx:min-w-0 [word-break:break-word]">随笔</span>
    </a>
      <button type="button" class="hextra-sidebar-collapsible-button hx:absolute hx:top-1/2 hx:-translate-y-1/2 hx:ltr:right-2 hx:rtl:left-2 hx:shrink-0 hx:cursor-pointer hx:p-0 hx:text-gray-500 hx:dark:text-neutral-400 hx:group-hover:text-gray-900 hx:dark:group-hover:text-gray-50 hx:group-data-[active=true]:text-primary-800 hx:group-data-[active=true]:dark:text-primary-600 hx:hextra-focus-visible-inset" aria-label="切换章节" aria-expanded="false"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" focusable="false" class="hx:h-[18px] hx:min-w-[18px] hx:rounded-xs hx:p-0.5 hx:hover:bg-gray-800/5 hx:dark:hover:bg-gray-100/5"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" class="hx:origin-center hx:transition-transform hx:rtl:-rotate-180"></path></svg></button>
  </div><div class="hextra-sidebar-children hx:ltr:pr-0 hx:rtl:pl-0 hx:overflow-hidden">
        <ul class='hx:relative hx:flex hx:flex-col hx:gap-1 hx:before:absolute hx:before:inset-y-1 hx:before:w-px hx:before:bg-gray-200 hx:before:content-[""] hx:ltr:ml-3 hx:ltr:pl-3 hx:ltr:before:left-0 hx:rtl:mr-3 hx:rtl:pr-3 hx:rtl:before:right-0 hx:dark:before:bg-neutral-800'><li class="hx:flex hx:flex-col "><div class="hextra-sidebar-item hx:group hx:relative hx:flex hx:items-center" data-active="false">
    <a
      class="hx:flex hx:items-center hx:justify-between hx:gap-2 hx:grow hx:cursor-pointer hx:rounded-sm hx:px-2 hx:py-1.5 hx:text-sm hx:transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none]
      hx:hextra-focus-visible-inset
        hx:text-gray-500 hx:hover:bg-gray-100 hx:hover:text-gray-900 hx:contrast-more:border hx:contrast-more:border-transparent hx:contrast-more:text-gray-900 hx:contrast-more:hover:border-gray-900 hx:dark:text-neutral-400 hx:dark:hover:bg-primary-100/5 hx:dark:hover:text-gray-50 hx:contrast-more:dark:text-gray-50 hx:contrast-more:dark:hover:border-gray-50"
      href="/essay/back2025/"
      
    >
      <span class="hx:min-w-0 [word-break:break-word]">2025回顾</span>
    </a>
  </div>
              
            </li><li class="hx:flex hx:flex-col "><div class="hextra-sidebar-item hx:group hx:relative hx:flex hx:items-center" data-active="false">
    <a
      class="hx:flex hx:items-center hx:justify-between hx:gap-2 hx:grow hx:cursor-pointer hx:rounded-sm hx:px-2 hx:py-1.5 hx:text-sm hx:transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none]
      hx:hextra-focus-visible-inset
        hx:text-gray-500 hx:hover:bg-gray-100 hx:hover:text-gray-900 hx:contrast-more:border hx:contrast-more:border-transparent hx:contrast-more:text-gray-900 hx:contrast-more:hover:border-gray-900 hx:dark:text-neutral-400 hx:dark:hover:bg-primary-100/5 hx:dark:hover:text-gray-50 hx:contrast-more:dark:text-gray-50 hx:contrast-more:dark:hover:border-gray-50"
      href="/essay/the_legend_of_the_white_eye_wolf/"
      
    >
      <span class="hx:min-w-0 [word-break:break-word]">白眼狼传</span>
    </a>
  </div>
              
            </li></ul>
      </div></li>
          <li class=""><div class="hextra-sidebar-item hx:group hx:relative hx:flex hx:items-center" data-active="false">
    <a
      class="hx:flex hx:items-center hx:justify-between hx:gap-2 hx:grow hx:cursor-pointer hx:rounded-sm hx:px-2 hx:py-1.5 hx:text-sm hx:transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] hx:ltr:pr-8 hx:rtl:pl-8
      hx:hextra-focus-visible-inset
        hx:text-gray-500 hx:hover:bg-gray-100 hx:hover:text-gray-900 hx:contrast-more:border hx:contrast-more:border-transparent hx:contrast-more:text-gray-900 hx:contrast-more:hover:border-gray-900 hx:dark:text-neutral-400 hx:dark:hover:bg-primary-100/5 hx:dark:hover:text-gray-50 hx:contrast-more:dark:text-gray-50 hx:contrast-more:dark:hover:border-gray-50"
      href="/game/"
      
    >
      <span class="hx:min-w-0 [word-break:break-word]">游戏</span>
    </a>
      <button type="button" class="hextra-sidebar-collapsible-button hx:absolute hx:top-1/2 hx:-translate-y-1/2 hx:ltr:right-2 hx:rtl:left-2 hx:shrink-0 hx:cursor-pointer hx:p-0 hx:text-gray-500 hx:dark:text-neutral-400 hx:group-hover:text-gray-900 hx:dark:group-hover:text-gray-50 hx:group-data-[active=true]:text-primary-800 hx:group-data-[active=true]:dark:text-primary-600 hx:hextra-focus-visible-inset" aria-label="切换章节" aria-expanded="false"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" focusable="false" class="hx:h-[18px] hx:min-w-[18px] hx:rounded-xs hx:p-0.5 hx:hover:bg-gray-800/5 hx:dark:hover:bg-gray-100/5"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" class="hx:origin-center hx:transition-transform hx:rtl:-rotate-180"></path></svg></button>
  </div><div class="hextra-sidebar-children hx:ltr:pr-0 hx:rtl:pl-0 hx:overflow-hidden">
        <ul class='hx:relative hx:flex hx:flex-col hx:gap-1 hx:before:absolute hx:before:inset-y-1 hx:before:w-px hx:before:bg-gray-200 hx:before:content-[""] hx:ltr:ml-3 hx:ltr:pl-3 hx:ltr:before:left-0 hx:rtl:mr-3 hx:rtl:pr-3 hx:rtl:before:right-0 hx:dark:before:bg-neutral-800'><li class="hx:flex hx:flex-col "><div class="hextra-sidebar-item hx:group hx:relative hx:flex hx:items-center" data-active="false">
    <a
      class="hx:flex hx:items-center hx:justify-between hx:gap-2 hx:grow hx:cursor-pointer hx:rounded-sm hx:px-2 hx:py-1.5 hx:text-sm hx:transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none]
      hx:hextra-focus-visible-inset
        hx:text-gray-500 hx:hover:bg-gray-100 hx:hover:text-gray-900 hx:contrast-more:border hx:contrast-more:border-transparent hx:contrast-more:text-gray-900 hx:contrast-more:hover:border-gray-900 hx:dark:text-neutral-400 hx:dark:hover:bg-primary-100/5 hx:dark:hover:text-gray-50 hx:contrast-more:dark:text-gray-50 hx:contrast-more:dark:hover:border-gray-50"
      href="/game/stick_to_an_isolated_city/"
      
    >
      <span class="hx:min-w-0 [word-break:break-word]">墨守孤城</span>
    </a>
  </div>
              
            </li><li class="hx:flex hx:flex-col "><div class="hextra-sidebar-item hx:group hx:relative hx:flex hx:items-center" data-active="false">
    <a
      class="hx:flex hx:items-center hx:justify-between hx:gap-2 hx:grow hx:cursor-pointer hx:rounded-sm hx:px-2 hx:py-1.5 hx:text-sm hx:transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none]
      hx:hextra-focus-visible-inset
        hx:text-gray-500 hx:hover:bg-gray-100 hx:hover:text-gray-900 hx:contrast-more:border hx:contrast-more:border-transparent hx:contrast-more:text-gray-900 hx:contrast-more:hover:border-gray-900 hx:dark:text-neutral-400 hx:dark:hover:bg-primary-100/5 hx:dark:hover:text-gray-50 hx:contrast-more:dark:text-gray-50 hx:contrast-more:dark:hover:border-gray-50"
      href="/game/nine_kings/"
      
    >
      <span class="hx:min-w-0 [word-break:break-word]">九王</span>
    </a>
  </div>
              
            </li><li class="hx:flex hx:flex-col "><div class="hextra-sidebar-item hx:group hx:relative hx:flex hx:items-center" data-active="false">
    <a
      class="hx:flex hx:items-center hx:justify-between hx:gap-2 hx:grow hx:cursor-pointer hx:rounded-sm hx:px-2 hx:py-1.5 hx:text-sm hx:transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none]
      hx:hextra-focus-visible-inset
        hx:text-gray-500 hx:hover:bg-gray-100 hx:hover:text-gray-900 hx:contrast-more:border hx:contrast-more:border-transparent hx:contrast-more:text-gray-900 hx:contrast-more:hover:border-gray-900 hx:dark:text-neutral-400 hx:dark:hover:bg-primary-100/5 hx:dark:hover:text-gray-50 hx:contrast-more:dark:text-gray-50 hx:contrast-more:dark:hover:border-gray-50"
      href="/game/cs_dust2/"
      
    >
      <span class="hx:min-w-0 [word-break:break-word]">cs炙热沙城二打法概述</span>
    </a>
  </div>
              
            </li><li class="hx:flex hx:flex-col "><div class="hextra-sidebar-item hx:group hx:relative hx:flex hx:items-center" data-active="false">
    <a
      class="hx:flex hx:items-center hx:justify-between hx:gap-2 hx:grow hx:cursor-pointer hx:rounded-sm hx:px-2 hx:py-1.5 hx:text-sm hx:transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none]
      hx:hextra-focus-visible-inset
        hx:text-gray-500 hx:hover:bg-gray-100 hx:hover:text-gray-900 hx:contrast-more:border hx:contrast-more:border-transparent hx:contrast-more:text-gray-900 hx:contrast-more:hover:border-gray-900 hx:dark:text-neutral-400 hx:dark:hover:bg-primary-100/5 hx:dark:hover:text-gray-50 hx:contrast-more:dark:text-gray-50 hx:contrast-more:dark:hover:border-gray-50"
      href="/game/2025taptap_spotlight_48hgamejam_chengdu/"
      
    >
      <span class="hx:min-w-0 [word-break:break-word]">2025TapTap聚光灯48Hgamejam成都场复盘</span>
    </a>
  </div>
              
            </li><li class="hx:flex hx:flex-col "><div class="hextra-sidebar-item hx:group hx:relative hx:flex hx:items-center" data-active="false">
    <a
      class="hx:flex hx:items-center hx:justify-between hx:gap-2 hx:grow hx:cursor-pointer hx:rounded-sm hx:px-2 hx:py-1.5 hx:text-sm hx:transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none]
      hx:hextra-focus-visible-inset
        hx:text-gray-500 hx:hover:bg-gray-100 hx:hover:text-gray-900 hx:contrast-more:border hx:contrast-more:border-transparent hx:contrast-more:text-gray-900 hx:contrast-more:hover:border-gray-900 hx:dark:text-neutral-400 hx:dark:hover:bg-primary-100/5 hx:dark:hover:text-gray-50 hx:contrast-more:dark:text-gray-50 hx:contrast-more:dark:hover:border-gray-50"
      href="/game/2026ggj/"
      
    >
      <span class="hx:min-w-0 [word-break:break-word]">2026 Global Game Jam武汉铃空站复盘</span>
    </a>
  </div>
              
            </li></ul>
      </div></li>
          <li class="open"><div class="hextra-sidebar-item hx:group hx:relative hx:flex hx:items-center" data-active="false">
    <a
      class="hx:flex hx:items-center hx:justify-between hx:gap-2 hx:grow hx:cursor-pointer hx:rounded-sm hx:px-2 hx:py-1.5 hx:text-sm hx:transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] hx:ltr:pr-8 hx:rtl:pl-8
      hx:hextra-focus-visible-inset
        hx:text-gray-500 hx:hover:bg-gray-100 hx:hover:text-gray-900 hx:contrast-more:border hx:contrast-more:border-transparent hx:contrast-more:text-gray-900 hx:contrast-more:hover:border-gray-900 hx:dark:text-neutral-400 hx:dark:hover:bg-primary-100/5 hx:dark:hover:text-gray-50 hx:contrast-more:dark:text-gray-50 hx:contrast-more:dark:hover:border-gray-50"
      href="/tech/"
      
    >
      <span class="hx:min-w-0 [word-break:break-word]">技术</span>
    </a>
      <button type="button" class="hextra-sidebar-collapsible-button hx:absolute hx:top-1/2 hx:-translate-y-1/2 hx:ltr:right-2 hx:rtl:left-2 hx:shrink-0 hx:cursor-pointer hx:p-0 hx:text-gray-500 hx:dark:text-neutral-400 hx:group-hover:text-gray-900 hx:dark:group-hover:text-gray-50 hx:group-data-[active=true]:text-primary-800 hx:group-data-[active=true]:dark:text-primary-600 hx:hextra-focus-visible-inset" aria-label="切换章节" aria-expanded="true"><svg fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true" focusable="false" class="hx:h-[18px] hx:min-w-[18px] hx:rounded-xs hx:p-0.5 hx:hover:bg-gray-800/5 hx:dark:hover:bg-gray-100/5"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" class="hx:origin-center hx:transition-transform hx:rtl:-rotate-180"></path></svg></button>
  </div><div class="hextra-sidebar-children hx:ltr:pr-0 hx:rtl:pl-0 hx:overflow-hidden">
        <ul class='hx:relative hx:flex hx:flex-col hx:gap-1 hx:before:absolute hx:before:inset-y-1 hx:before:w-px hx:before:bg-gray-200 hx:before:content-[""] hx:ltr:ml-3 hx:ltr:pl-3 hx:ltr:before:left-0 hx:rtl:mr-3 hx:rtl:pr-3 hx:rtl:before:right-0 hx:dark:before:bg-neutral-800'><li class="hx:flex hx:flex-col "><div class="hextra-sidebar-item hx:group hx:relative hx:flex hx:items-center" data-active="false">
    <a
      class="hx:flex hx:items-center hx:justify-between hx:gap-2 hx:grow hx:cursor-pointer hx:rounded-sm hx:px-2 hx:py-1.5 hx:text-sm hx:transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none]
      hx:hextra-focus-visible-inset
        hx:text-gray-500 hx:hover:bg-gray-100 hx:hover:text-gray-900 hx:contrast-more:border hx:contrast-more:border-transparent hx:contrast-more:text-gray-900 hx:contrast-more:hover:border-gray-900 hx:dark:text-neutral-400 hx:dark:hover:bg-primary-100/5 hx:dark:hover:text-gray-50 hx:contrast-more:dark:text-gray-50 hx:contrast-more:dark:hover:border-gray-50"
      href="/tech/ai_decision_tree_state_machine/"
      
    >
      <span class="hx:min-w-0 [word-break:break-word]">AI决策-状态机</span>
    </a>
  </div>
              
            </li><li class="hx:flex hx:flex-col "><div class="hextra-sidebar-item hx:group hx:relative hx:flex hx:items-center" data-active="false">
    <a
      class="hx:flex hx:items-center hx:justify-between hx:gap-2 hx:grow hx:cursor-pointer hx:rounded-sm hx:px-2 hx:py-1.5 hx:text-sm hx:transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none]
      hx:hextra-focus-visible-inset
        hx:text-gray-500 hx:hover:bg-gray-100 hx:hover:text-gray-900 hx:contrast-more:border hx:contrast-more:border-transparent hx:contrast-more:text-gray-900 hx:contrast-more:hover:border-gray-900 hx:dark:text-neutral-400 hx:dark:hover:bg-primary-100/5 hx:dark:hover:text-gray-50 hx:contrast-more:dark:text-gray-50 hx:contrast-more:dark:hover:border-gray-50"
      href="/tech/ai_decision_tree_state_machine_behavior_tree_htn_goap/"
      
    >
      <span class="hx:min-w-0 [word-break:break-word]">AI决策-状态机&#43;行为树&#43;HTN&#43;GOAP</span>
    </a>
  </div>
              
            </li><li class="hx:flex hx:flex-col open"><div class="hextra-sidebar-item hx:group hx:relative hx:flex hx:items-center" data-active="true">
    <a
      class="hx:flex hx:items-center hx:justify-between hx:gap-2 hx:grow hx:cursor-pointer hx:rounded-sm hx:px-2 hx:py-1.5 hx:text-sm hx:transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none]
      hx:hextra-focus-visible-inset
        hextra-sidebar-active-item hx:bg-primary-100 hx:font-semibold hx:text-primary-800 hx:contrast-more:border hx:contrast-more:border-primary-500 hx:dark:bg-primary-400/10 hx:dark:text-primary-600 hx:contrast-more:dark:border-primary-500"
      href="/tech/godot_a_star/"
      
    >
      <span class="hx:min-w-0 [word-break:break-word]">基于Godot的A*寻路算法</span>
    </a>
  </div>
  
    <ul class='hx:flex hx:flex-col hx:gap-1 hx:relative hx:before:absolute hx:before:inset-y-1 hx:before:w-px hx:before:bg-gray-200 hx:before:content-[""] hx:dark:before:bg-neutral-800 hx:ltr:pl-3 hx:ltr:before:left-0 hx:rtl:pr-3 hx:rtl:before:right-0 hx:ltr:ml-3 hx:rtl:mr-3'><li>
              <a
                href="#%e5%af%bb%e8%b7%af%e6%b6%88%e8%80%97%e5%85%ac%e5%bc%8f"
                class="hx:flex hx:rounded-sm hx:px-2 hx:py-1.5 hx:text-sm hx:transition-colors [word-break:break-word] hx:cursor-pointer [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] hx:contrast-more:border hx:gap-2 hx:before:opacity-25 hx:before:content-['#'] hx:text-gray-500 hx:hover:bg-gray-100 hx:hover:text-gray-900 hx:dark:text-neutral-400 hx:dark:hover:bg-primary-100/5 hx:dark:hover:text-gray-50 hx:contrast-more:text-gray-900 hx:contrast-more:dark:text-gray-50 hx:contrast-more:border-transparent hx:contrast-more:hover:border-gray-900 hx:contrast-more:dark:hover:border-gray-50"
              >寻路消耗公式</a>
            </li>
          <li>
              <a
                href="#open%e5%bc%80%e5%90%af%e5%88%97%e8%a1%a8%e5%92%8cclose%e5%85%b3%e9%97%ad%e5%88%97%e8%a1%a8"
                class="hx:flex hx:rounded-sm hx:px-2 hx:py-1.5 hx:text-sm hx:transition-colors [word-break:break-word] hx:cursor-pointer [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] hx:contrast-more:border hx:gap-2 hx:before:opacity-25 hx:before:content-['#'] hx:text-gray-500 hx:hover:bg-gray-100 hx:hover:text-gray-900 hx:dark:text-neutral-400 hx:dark:hover:bg-primary-100/5 hx:dark:hover:text-gray-50 hx:contrast-more:text-gray-900 hx:contrast-more:dark:text-gray-50 hx:contrast-more:border-transparent hx:contrast-more:hover:border-gray-900 hx:contrast-more:dark:hover:border-gray-50"
              >open开启列表和close关闭列表</a>
            </li>
          <li>
              <a
                href="#%e5%ae%9e%e7%8e%b0%e7%90%86%e8%ae%ba%e8%bf%87%e7%a8%8b"
                class="hx:flex hx:rounded-sm hx:px-2 hx:py-1.5 hx:text-sm hx:transition-colors [word-break:break-word] hx:cursor-pointer [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] hx:contrast-more:border hx:gap-2 hx:before:opacity-25 hx:before:content-['#'] hx:text-gray-500 hx:hover:bg-gray-100 hx:hover:text-gray-900 hx:dark:text-neutral-400 hx:dark:hover:bg-primary-100/5 hx:dark:hover:text-gray-50 hx:contrast-more:text-gray-900 hx:contrast-more:dark:text-gray-50 hx:contrast-more:border-transparent hx:contrast-more:hover:border-gray-900 hx:contrast-more:dark:hover:border-gray-50"
              >实现理论过程</a>
            </li>
          <li>
              <a
                href="#%e4%bb%a3%e7%a0%81%e5%ae%9e%e7%8e%b0"
                class="hx:flex hx:rounded-sm hx:px-2 hx:py-1.5 hx:text-sm hx:transition-colors [word-break:break-word] hx:cursor-pointer [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none] hx:contrast-more:border hx:gap-2 hx:before:opacity-25 hx:before:content-['#'] hx:text-gray-500 hx:hover:bg-gray-100 hx:hover:text-gray-900 hx:dark:text-neutral-400 hx:dark:hover:bg-primary-100/5 hx:dark:hover:text-gray-50 hx:contrast-more:text-gray-900 hx:contrast-more:dark:text-gray-50 hx:contrast-more:border-transparent hx:contrast-more:hover:border-gray-900 hx:contrast-more:dark:hover:border-gray-50"
              >代码实现</a>
            </li>
          </ul>
  
              
            </li><li class="hx:flex hx:flex-col "><div class="hextra-sidebar-item hx:group hx:relative hx:flex hx:items-center" data-active="false">
    <a
      class="hx:flex hx:items-center hx:justify-between hx:gap-2 hx:grow hx:cursor-pointer hx:rounded-sm hx:px-2 hx:py-1.5 hx:text-sm hx:transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none]
      hx:hextra-focus-visible-inset
        hx:text-gray-500 hx:hover:bg-gray-100 hx:hover:text-gray-900 hx:contrast-more:border hx:contrast-more:border-transparent hx:contrast-more:text-gray-900 hx:contrast-more:hover:border-gray-900 hx:dark:text-neutral-400 hx:dark:hover:bg-primary-100/5 hx:dark:hover:text-gray-50 hx:contrast-more:dark:text-gray-50 hx:contrast-more:dark:hover:border-gray-50"
      href="/tech/godot_code_framework/"
      
    >
      <span class="hx:min-w-0 [word-break:break-word]">Godot或许合格的程序架构</span>
    </a>
  </div>
              
            </li><li class="hx:flex hx:flex-col "><div class="hextra-sidebar-item hx:group hx:relative hx:flex hx:items-center" data-active="false">
    <a
      class="hx:flex hx:items-center hx:justify-between hx:gap-2 hx:grow hx:cursor-pointer hx:rounded-sm hx:px-2 hx:py-1.5 hx:text-sm hx:transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none]
      hx:hextra-focus-visible-inset
        hx:text-gray-500 hx:hover:bg-gray-100 hx:hover:text-gray-900 hx:contrast-more:border hx:contrast-more:border-transparent hx:contrast-more:text-gray-900 hx:contrast-more:hover:border-gray-900 hx:dark:text-neutral-400 hx:dark:hover:bg-primary-100/5 hx:dark:hover:text-gray-50 hx:contrast-more:dark:text-gray-50 hx:contrast-more:dark:hover:border-gray-50"
      href="/tech/unity_general_cotton_and_the_conclusion_line/"
      
    >
      <span class="hx:min-w-0 [word-break:break-word]">Unity泛型·委托及事件总线</span>
    </a>
  </div>
              
            </li></ul>
      </div></li>
          <li class=""><div class="hextra-sidebar-item hx:group hx:relative hx:flex hx:items-center" data-active="false">
    <a
      class="hx:flex hx:items-center hx:justify-between hx:gap-2 hx:grow hx:cursor-pointer hx:rounded-sm hx:px-2 hx:py-1.5 hx:text-sm hx:transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none]
      hx:hextra-focus-visible-inset
        hx:text-gray-500 hx:hover:bg-gray-100 hx:hover:text-gray-900 hx:contrast-more:border hx:contrast-more:border-transparent hx:contrast-more:text-gray-900 hx:contrast-more:hover:border-gray-900 hx:dark:text-neutral-400 hx:dark:hover:bg-primary-100/5 hx:dark:hover:text-gray-50 hx:contrast-more:dark:text-gray-50 hx:contrast-more:dark:hover:border-gray-50"
      href="/about/"
      
    >
      <span class="hx:min-w-0 [word-break:break-word]">关于</span>
    </a>
  </div></li>
      <li class="[word-break:break-word] hx:mt-5 hx:mb-2 hx:px-2 hx:py-1.5 hx:text-sm hx:font-semibold hx:text-gray-900 hx:first:mt-0 hx:dark:text-gray-100">
        <span class="hx:cursor-default">更多</span>
      </li>
    <li><div class="hextra-sidebar-item hx:group hx:relative hx:flex hx:items-center" data-active="false">
    <a
      class="hx:flex hx:items-center hx:justify-between hx:gap-2 hx:grow hx:cursor-pointer hx:rounded-sm hx:px-2 hx:py-1.5 hx:text-sm hx:transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none]
      hx:hextra-focus-visible-inset
        hx:text-gray-500 hx:hover:bg-gray-100 hx:hover:text-gray-900 hx:contrast-more:border hx:contrast-more:border-transparent hx:contrast-more:text-gray-900 hx:contrast-more:hover:border-gray-900 hx:dark:text-neutral-400 hx:dark:hover:bg-primary-100/5 hx:dark:hover:text-gray-50 hx:contrast-more:dark:text-gray-50 hx:contrast-more:dark:hover:border-gray-50"
      href="/about"
      
    >
      <span class="hx:min-w-0 [word-break:break-word]">关于</span>
    </a>
  </div></li>
    <li><div class="hextra-sidebar-item hx:group hx:relative hx:flex hx:items-center" data-active="false">
    <a
      class="hx:flex hx:items-center hx:justify-between hx:gap-2 hx:grow hx:cursor-pointer hx:rounded-sm hx:px-2 hx:py-1.5 hx:text-sm hx:transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none]
      hx:hextra-focus-visible-inset
        hx:text-gray-500 hx:hover:bg-gray-100 hx:hover:text-gray-900 hx:contrast-more:border hx:contrast-more:border-transparent hx:contrast-more:text-gray-900 hx:contrast-more:hover:border-gray-900 hx:dark:text-neutral-400 hx:dark:hover:bg-primary-100/5 hx:dark:hover:text-gray-50 hx:contrast-more:dark:text-gray-50 hx:contrast-more:dark:hover:border-gray-50"
      href="https://github.com/yuyi-yutie/yuyi-yutie.github.io"
      target="_blank" rel="noreferrer"
    >
      <span class="hx:min-w-0 [word-break:break-word]">GitHub发布页 ↗</span>
    </a>
  </div></li>
    
    </ul>

    <ul class="hx:flex hx:flex-col hx:gap-1 hx:max-md:hidden">
        
          <li class=""><div class="hextra-sidebar-item hx:group hx:relative hx:flex hx:items-center" data-active="false">
    <a
      class="hx:flex hx:items-center hx:justify-between hx:gap-2 hx:grow hx:cursor-pointer hx:rounded-sm hx:px-2 hx:py-1.5 hx:text-sm hx:transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none]
      hx:hextra-focus-visible-inset
        hx:text-gray-500 hx:hover:bg-gray-100 hx:hover:text-gray-900 hx:contrast-more:border hx:contrast-more:border-transparent hx:contrast-more:text-gray-900 hx:contrast-more:hover:border-gray-900 hx:dark:text-neutral-400 hx:dark:hover:bg-primary-100/5 hx:dark:hover:text-gray-50 hx:contrast-more:dark:text-gray-50 hx:contrast-more:dark:hover:border-gray-50"
      href="/tech/ai_decision_tree_state_machine/"
      
    >
      <span class="hx:min-w-0 [word-break:break-word]">AI决策-状态机</span>
    </a>
  </div></li>
          <li class=""><div class="hextra-sidebar-item hx:group hx:relative hx:flex hx:items-center" data-active="false">
    <a
      class="hx:flex hx:items-center hx:justify-between hx:gap-2 hx:grow hx:cursor-pointer hx:rounded-sm hx:px-2 hx:py-1.5 hx:text-sm hx:transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none]
      hx:hextra-focus-visible-inset
        hx:text-gray-500 hx:hover:bg-gray-100 hx:hover:text-gray-900 hx:contrast-more:border hx:contrast-more:border-transparent hx:contrast-more:text-gray-900 hx:contrast-more:hover:border-gray-900 hx:dark:text-neutral-400 hx:dark:hover:bg-primary-100/5 hx:dark:hover:text-gray-50 hx:contrast-more:dark:text-gray-50 hx:contrast-more:dark:hover:border-gray-50"
      href="/tech/ai_decision_tree_state_machine_behavior_tree_htn_goap/"
      
    >
      <span class="hx:min-w-0 [word-break:break-word]">AI决策-状态机&#43;行为树&#43;HTN&#43;GOAP</span>
    </a>
  </div></li>
          <li class="open"><div class="hextra-sidebar-item hx:group hx:relative hx:flex hx:items-center" data-active="true">
    <a
      class="hx:flex hx:items-center hx:justify-between hx:gap-2 hx:grow hx:cursor-pointer hx:rounded-sm hx:px-2 hx:py-1.5 hx:text-sm hx:transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none]
      hx:hextra-focus-visible-inset
        hextra-sidebar-active-item hx:bg-primary-100 hx:font-semibold hx:text-primary-800 hx:contrast-more:border hx:contrast-more:border-primary-500 hx:dark:bg-primary-400/10 hx:dark:text-primary-600 hx:contrast-more:dark:border-primary-500"
      href="/tech/godot_a_star/"
      
    >
      <span class="hx:min-w-0 [word-break:break-word]">基于Godot的A*寻路算法</span>
    </a>
  </div></li>
          <li class=""><div class="hextra-sidebar-item hx:group hx:relative hx:flex hx:items-center" data-active="false">
    <a
      class="hx:flex hx:items-center hx:justify-between hx:gap-2 hx:grow hx:cursor-pointer hx:rounded-sm hx:px-2 hx:py-1.5 hx:text-sm hx:transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none]
      hx:hextra-focus-visible-inset
        hx:text-gray-500 hx:hover:bg-gray-100 hx:hover:text-gray-900 hx:contrast-more:border hx:contrast-more:border-transparent hx:contrast-more:text-gray-900 hx:contrast-more:hover:border-gray-900 hx:dark:text-neutral-400 hx:dark:hover:bg-primary-100/5 hx:dark:hover:text-gray-50 hx:contrast-more:dark:text-gray-50 hx:contrast-more:dark:hover:border-gray-50"
      href="/tech/godot_code_framework/"
      
    >
      <span class="hx:min-w-0 [word-break:break-word]">Godot或许合格的程序架构</span>
    </a>
  </div></li>
          <li class=""><div class="hextra-sidebar-item hx:group hx:relative hx:flex hx:items-center" data-active="false">
    <a
      class="hx:flex hx:items-center hx:justify-between hx:gap-2 hx:grow hx:cursor-pointer hx:rounded-sm hx:px-2 hx:py-1.5 hx:text-sm hx:transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none]
      hx:hextra-focus-visible-inset
        hx:text-gray-500 hx:hover:bg-gray-100 hx:hover:text-gray-900 hx:contrast-more:border hx:contrast-more:border-transparent hx:contrast-more:text-gray-900 hx:contrast-more:hover:border-gray-900 hx:dark:text-neutral-400 hx:dark:hover:bg-primary-100/5 hx:dark:hover:text-gray-50 hx:contrast-more:dark:text-gray-50 hx:contrast-more:dark:hover:border-gray-50"
      href="/tech/unity_general_cotton_and_the_conclusion_line/"
      
    >
      <span class="hx:min-w-0 [word-break:break-word]">Unity泛型·委托及事件总线</span>
    </a>
  </div></li>
        
      <li class="[word-break:break-word] hx:mt-5 hx:mb-2 hx:px-2 hx:py-1.5 hx:text-sm hx:font-semibold hx:text-gray-900 hx:first:mt-0 hx:dark:text-gray-100">
        <span class="hx:cursor-default">更多</span>
      </li>
    <li><div class="hextra-sidebar-item hx:group hx:relative hx:flex hx:items-center" data-active="false">
    <a
      class="hx:flex hx:items-center hx:justify-between hx:gap-2 hx:grow hx:cursor-pointer hx:rounded-sm hx:px-2 hx:py-1.5 hx:text-sm hx:transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none]
      hx:hextra-focus-visible-inset
        hx:text-gray-500 hx:hover:bg-gray-100 hx:hover:text-gray-900 hx:contrast-more:border hx:contrast-more:border-transparent hx:contrast-more:text-gray-900 hx:contrast-more:hover:border-gray-900 hx:dark:text-neutral-400 hx:dark:hover:bg-primary-100/5 hx:dark:hover:text-gray-50 hx:contrast-more:dark:text-gray-50 hx:contrast-more:dark:hover:border-gray-50"
      href="/about"
      
    >
      <span class="hx:min-w-0 [word-break:break-word]">关于</span>
    </a>
  </div></li>
    <li><div class="hextra-sidebar-item hx:group hx:relative hx:flex hx:items-center" data-active="false">
    <a
      class="hx:flex hx:items-center hx:justify-between hx:gap-2 hx:grow hx:cursor-pointer hx:rounded-sm hx:px-2 hx:py-1.5 hx:text-sm hx:transition-colors [-webkit-tap-highlight-color:transparent] [-webkit-touch-callout:none]
      hx:hextra-focus-visible-inset
        hx:text-gray-500 hx:hover:bg-gray-100 hx:hover:text-gray-900 hx:contrast-more:border hx:contrast-more:border-transparent hx:contrast-more:text-gray-900 hx:contrast-more:hover:border-gray-900 hx:dark:text-neutral-400 hx:dark:hover:bg-primary-100/5 hx:dark:hover:text-gray-50 hx:contrast-more:dark:text-gray-50 hx:contrast-more:dark:hover:border-gray-50"
      href="https://github.com/yuyi-yutie/yuyi-yutie.github.io"
      target="_blank" rel="noreferrer"
    >
      <span class="hx:min-w-0 [word-break:break-word]">GitHub发布页 ↗</span>
    </a>
  </div></li>
    
      </ul>
    </div>
  
  
    <div class="  hx:sticky hx:bottom-0 hx:max-h-(--menu-height) hx:bg-white hx:dark:bg-dark hx:mx-4 hx:py-4 hx:shadow-[0_-12px_16px_#fff] hx:flex hx:items-center hx:gap-2 hx:border-gray-200 hx:dark:border-neutral-800 hx:dark:shadow-[0_-12px_16px_#111] hx:contrast-more:border-neutral-400 hx:contrast-more:shadow-none hx:contrast-more:dark:shadow-none hx:border-t" data-toggle-animation="show"><div class="hx:flex hx:grow hx:flex-col"><div class="hx:flex hx:justify-items-start hx:group" data-theme="light">
  <button
    title="切换主题"
    data-state="closed"
    data-location="bottom"
    class="hextra-theme-toggle hx:cursor-pointer hx:rounded-md hx:text-left hx:font-medium hx:h-7 hx:px-2 hx:text-xs hx:hover:bg-gray-100 hx:hover:text-gray-900 hx:dark:hover:bg-primary-100/5 hx:dark:hover:text-gray-50 hx:font-medium hx:text-gray-600 hx:transition-colors hx:dark:text-gray-400 hx:grow"
    type="button"
    aria-label="切换主题"
    aria-expanded="false"
    aria-haspopup="menu"
  >
    <div class="hx:flex hx:items-center hx:gap-2 hx:capitalize"><svg height=12 class="hx:group-data-[theme=dark]:hidden hx:group-data-[theme=system]:hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/></svg><span class="hx:group-data-[theme=dark]:hidden hx:group-data-[theme=system]:hidden">浅色</span><svg height=12 class="hx:group-data-[theme=light]:hidden hx:group-data-[theme=system]:hidden" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"/></svg><span class="hx:group-data-[theme=light]:hidden hx:group-data-[theme=system]:hidden">深色</span><svg height=12 class="hx:group-data-[theme=dark]:hidden hx:group-data-[theme=light]:hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"  fill="currentColor">
  <path d="M 11.996094,2 C 6.4986225,2.0192368 2.03125,6.5024993 2.03125,12 c 0,5.497501 4.4673725,9.980763 9.964844,10 H 12 12.0039 c 5.497471,-0.01924 9.964844,-4.502499 9.964844,-10 0,-5.4975007 -4.467373,-9.9807632 -9.964844,-10 H 12 Z M 12,4 c 4.417218,0.017598 7.96875,3.5822356 7.96875,8 0,4.417764 -3.551532,7.982402 -7.96875,8 z" />
</svg>
<span class="hx:group-data-[theme=dark]:hidden hx:group-data-[theme=light]:hidden">跟随系统</span></div>
  </button>
  <ul
    class="hextra-theme-toggle-options hx:hidden hx:z-20 hx:max-h-64 hx:overflow-auto hx:rounded-lg hx:border hx:border-gray-200 hx:bg-white hx:p-1 hx:text-sm hx:shadow-lg hx:dark:border-neutral-700 hx:dark:bg-neutral-900"
    style="position: fixed; inset: auto auto 0px 0px; margin: 0px; min-width: 100px;"
    data-theme="light"
    role="menu"
  >
    <li role="none" class="hx:flex hx:flex-col">
      <button
        type="button"
        role="menuitemradio"
        aria-checked="true"
        tabindex="-1"
        data-item="light"
        class="hx:text-gray-700 hx:dark:text-gray-300 hx:hover:bg-gray-100 hx:hover:text-gray-900 hx:dark:hover:bg-neutral-800 hx:dark:hover:text-gray-100 hx:relative hx:cursor-pointer hx:whitespace-nowrap hx:rounded-sm hx:py-1.5 hx:transition-colors hx:ltr:pl-3 hx:ltr:pr-9 hx:rtl:pr-3 hx:rtl:pl-9 hx:text-left hx:w-full hx:bg-transparent hx:border-0"
      >
        浅色
         <span class="hx:absolute hx:inset-y-0 hx:flex hx:items-center hx:ltr:right-3 hx:rtl:left-3 hx:group-data-[theme=dark]:hidden hx:group-data-[theme=system]:hidden"><svg height=1em width=1em xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"/></svg></span>
      </button>
    </li>
    <li role="none" class="hx:flex hx:flex-col">
      <button
        type="button"
        role="menuitemradio"
        aria-checked="false"
        tabindex="-1"
        data-item="dark"
        class="hx:text-gray-700 hx:dark:text-gray-300 hx:hover:bg-gray-100 hx:hover:text-gray-900 hx:dark:hover:bg-neutral-800 hx:dark:hover:text-gray-100 hx:relative hx:cursor-pointer hx:whitespace-nowrap hx:rounded-sm hx:py-1.5 hx:transition-colors hx:ltr:pl-3 hx:ltr:pr-9 hx:rtl:pr-3 hx:rtl:pl-9 hx:text-left hx:w-full hx:bg-transparent hx:border-0"
      >
        深色
         <span class="hx:absolute hx:inset-y-0 hx:flex hx:items-center hx:ltr:right-3 hx:rtl:left-3 hx:group-data-[theme=light]:hidden hx:group-data-[theme=system]:hidden"><svg height=1em width=1em xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"/></svg></span>
      </button>
    </li>
    <li role="none" class="hx:flex hx:flex-col">
      <button
        type="button"
        role="menuitemradio"
        aria-checked="false"
        tabindex="-1"
        data-item="system"
        class="hx:text-gray-700 hx:dark:text-gray-300 hx:hover:bg-gray-100 hx:hover:text-gray-900 hx:dark:hover:bg-neutral-800 hx:dark:hover:text-gray-100 hx:relative hx:cursor-pointer hx:whitespace-nowrap hx:rounded-sm hx:py-1.5 hx:transition-colors hx:ltr:pl-3 hx:ltr:pr-9 hx:rtl:pr-3 hx:rtl:pl-9 hx:text-left hx:w-full hx:bg-transparent hx:border-0"
      >
        跟随系统
         <span class="hx:absolute hx:inset-y-0 hx:flex hx:items-center hx:ltr:right-3 hx:rtl:left-3 hx:group-data-[theme=dark]:hidden hx:group-data-[theme=light]:hidden"><svg height=1em width=1em xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"/></svg></span>
      </button>
    </li>
  </ul>
</div>
</div></div></aside>
    
<nav class="hextra-toc hx:order-last hx:hidden hx:w-64 hx:shrink-0 hx:xl:block hx:print:hidden hx:px-4" aria-label="目录">
    <div class="hextra-scrollbar hx:sticky hx:top-16 hx:overflow-y-auto hx:pr-4 hx:pt-6 hx:text-sm [hyphens:auto] hx:max-h-[calc(100vh-var(--navbar-height)-env(safe-area-inset-bottom))] hx:ltr:-mr-4 hx:rtl:-ml-4"><p class="hx:mb-4 hx:font-semibold hx:tracking-tight">此页上</p><ul>
      <li class="hx:my-2 hx:scroll-my-6 hx:scroll-py-6">
        <a class="hx:font-medium hx:inline-block hx:rounded-sm hx:text-gray-500 hx:hover:text-gray-900 hx:dark:text-gray-400 hx:dark:hover:text-gray-300 hx:contrast-more:text-gray-900 hx:contrast-more:underline hx:contrast-more:dark:text-gray-50 hx:w-full hx:wrap-break-word hx:hextra-focus-visible-inset" href="#%e5%af%bb%e8%b7%af%e6%b6%88%e8%80%97%e5%85%ac%e5%bc%8f">寻路消耗公式
        </a>
      </li>
      <li class="hx:my-2 hx:scroll-my-6 hx:scroll-py-6">
        <a class="hx:ltr:pl-4 hx:rtl:pr-4 hx:inline-block hx:rounded-sm hx:text-gray-500 hx:hover:text-gray-900 hx:dark:text-gray-400 hx:dark:hover:text-gray-300 hx:contrast-more:text-gray-900 hx:contrast-more:underline hx:contrast-more:dark:text-gray-50 hx:w-full hx:wrap-break-word hx:hextra-focus-visible-inset" href="#%e4%b8%89%e4%b8%aa%e8%b7%9d%e7%a6%bb">三个距离
        </a>
      </li>
      <li class="hx:my-2 hx:scroll-my-6 hx:scroll-py-6">
        <a class="hx:font-medium hx:inline-block hx:rounded-sm hx:text-gray-500 hx:hover:text-gray-900 hx:dark:text-gray-400 hx:dark:hover:text-gray-300 hx:contrast-more:text-gray-900 hx:contrast-more:underline hx:contrast-more:dark:text-gray-50 hx:w-full hx:wrap-break-word hx:hextra-focus-visible-inset" href="#open%e5%bc%80%e5%90%af%e5%88%97%e8%a1%a8%e5%92%8cclose%e5%85%b3%e9%97%ad%e5%88%97%e8%a1%a8">open开启列表和close关闭列表
        </a>
      </li>
      <li class="hx:my-2 hx:scroll-my-6 hx:scroll-py-6">
        <a class="hx:font-medium hx:inline-block hx:rounded-sm hx:text-gray-500 hx:hover:text-gray-900 hx:dark:text-gray-400 hx:dark:hover:text-gray-300 hx:contrast-more:text-gray-900 hx:contrast-more:underline hx:contrast-more:dark:text-gray-50 hx:w-full hx:wrap-break-word hx:hextra-focus-visible-inset" href="#%e5%ae%9e%e7%8e%b0%e7%90%86%e8%ae%ba%e8%bf%87%e7%a8%8b">实现理论过程
        </a>
      </li>
      <li class="hx:my-2 hx:scroll-my-6 hx:scroll-py-6">
        <a class="hx:font-medium hx:inline-block hx:rounded-sm hx:text-gray-500 hx:hover:text-gray-900 hx:dark:text-gray-400 hx:dark:hover:text-gray-300 hx:contrast-more:text-gray-900 hx:contrast-more:underline hx:contrast-more:dark:text-gray-50 hx:w-full hx:wrap-break-word hx:hextra-focus-visible-inset" href="#%e4%bb%a3%e7%a0%81%e5%ae%9e%e7%8e%b0">代码实现
        </a>
      </li></ul>
      <div class="hx:mt-8 hx:border-t hx:bg-white hx:pt-8 hx:shadow-[0_-12px_16px_white] hx:dark:bg-dark hx:dark:shadow-[0_-12px_16px_#111] hx:sticky hx:bottom-0 hx:flex hx:flex-col hx:items-start hx:gap-2 hx:pb-8 hx:border-gray-200 hx:dark:border-neutral-800 hx:contrast-more:border-t hx:contrast-more:border-neutral-400 hx:contrast-more:shadow-none hx:contrast-more:dark:border-neutral-400">
        <button id="backToTop" tabindex="-1" onClick="scrollUp();" class="hx:cursor-pointer hx:transition-all hx:duration-75 hx:opacity-0 hx:text-xs hx:font-medium hx:text-gray-500 hx:hover:text-gray-900 hx:dark:text-gray-400 hx:dark:hover:text-gray-100 hx:contrast-more:text-gray-800 hx:contrast-more:dark:text-gray-50">
          <span>返回顶部</span>
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true" focusable="false" class="hx:inline hx:ltr:ml-1 hx:rtl:mr-1 hx:h-3.5 hx:w-3.5 hx:rounded-full hx:border hx:border-gray-500 hx:hover:border-gray-900 hx:dark:border-gray-400 hx:dark:hover:border-gray-100 hx:contrast-more:border-gray-800 hx:contrast-more:dark:border-gray-50">
            <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 15.75l7.5-7.5 7.5 7.5" />
          </svg>
        </button>
      </div>
    </div>
  </nav>


    <article class="hx:w-full hx:break-words hx:flex hx:min-h-[calc(100vh-var(--navbar-height))] hx:min-w-0 hx:justify-center hx:pb-8 hx:pr-[calc(env(safe-area-inset-right)-1.5rem)]">
      <main id="content" class="hx:w-full hx:min-w-0 hextra-max-content-width hx:px-6 hx:pt-4 hx:md:px-12">
        <div class="hx:mt-1.5 hx:flex hx:items-center hx:gap-1 hx:overflow-hidden hx:text-sm hx:text-gray-500 hx:dark:text-gray-400 hx:contrast-more:text-current">
        <div class="hx:whitespace-nowrap hx:transition-colors hx:min-w-[24px] hx:overflow-hidden hx:text-ellipsis hx:hover:text-gray-900 hx:dark:hover:text-gray-100">
          <a href="/tech/" class="hx:inline-block hx:rounded-sm hx:hextra-focus-visible-inset">技术</a>
        </div><svg class="hx:w-3.5 hx:shrink-0 hx:rtl:-rotate-180" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"/></svg><div class="hx:whitespace-nowrap hx:transition-colors hx:font-medium hx:text-gray-700 hx:contrast-more:font-bold hx:contrast-more:text-current hx:dark:text-gray-100 hx:contrast-more:dark:text-current">基于Godot的A*寻路算法</div>
  </div>

        <div class="content">
          
          <div class="hx:flex hx:flex-col hx:sm:flex-row hx:items-start hx:sm:items-center hx:sm:justify-between hx:gap-4 hx:mb-4">
            <h1 class="hx:mb-0">基于Godot的A*寻路算法</h1>
            
          </div>
          
          <p>以下写的是四连通的情况，但其实完全可以类推到六连通和八连通</p>
<p>首先是Astar寻路的四个要点：</p>
<ol>
<li>寻路消耗公式f = g + h（虽然我并不知道为什么一定是这三个字母而不是a = b + c）</li>
<li>open开启列表</li>
<li>close关闭列表</li>
<li>反向遍历</li>
</ol>
<h2>寻路消耗公式<span class="hx:absolute hx:-mt-20" id="寻路消耗公式"></span>
    <a href="#%e5%af%bb%e8%b7%af%e6%b6%88%e8%80%97%e5%85%ac%e5%bc%8f" class="subheading-anchor" aria-label="此章节的永久链接"></a></h2><p><strong>f = g + h</strong></p>
<p>其中，f为寻路消耗，g为起点到计算点的切比雪夫距离，h为计算点到终点的曼哈顿距离</p>
<p>为什么是切比雪夫距离？经典的版本是欧氏距离，但依旧如题，这里要涉及到消耗，所以我会更偏向使用切比雪夫距离，下方解释一下三个距离</p>
<h3>三个距离<span class="hx:absolute hx:-mt-20" id="三个距离"></span>
    <a href="#%e4%b8%89%e4%b8%aa%e8%b7%9d%e7%a6%bb" class="subheading-anchor" aria-label="此章节的永久链接"></a></h3><p>欧几里得距离（欧氏距离）的计算公式是横坐标差的平方加纵坐标差的平方的和开根号，当对ai体的灵活度有要求时，就会用这个距离代表g</p>
<p>曼哈顿距离的计算公式是横坐标差的绝对值加纵坐标差的绝对值，一般用来衡量计算点到终点的远近</p>
<p>切比雪夫距离没有很明确的计算公式，如果非要有的话那应该就是对经过的所有格子的消耗求和，所以一般说到消耗都是切比雪夫距离</p>
<h2>open开启列表和close关闭列表<span class="hx:absolute hx:-mt-20" id="open开启列表和close关闭列表"></span>
    <a href="#open%e5%bc%80%e5%90%af%e5%88%97%e8%a1%a8%e5%92%8cclose%e5%85%b3%e9%97%ad%e5%88%97%e8%a1%a8" class="subheading-anchor" aria-label="此章节的永久链接"></a></h2><p>open用来存储已访问但未放入路径的格子，close用来存储放入路径的格子，Astar计算出的路径就是close的子集</p>
<p>open通常需要包含的数据有：计算格父级的坐标，计算格的f，g，h，计算格的坐标
close需要包含的数据有：计算格父级的坐标，计算格的坐标</p>
<h2>实现理论过程<span class="hx:absolute hx:-mt-20" id="实现理论过程"></span>
    <a href="#%e5%ae%9e%e7%8e%b0%e7%90%86%e8%ae%ba%e8%bf%87%e7%a8%8b" class="subheading-anchor" aria-label="此章节的永久链接"></a></h2><p>前提：假设所有格子都继承于一个类Grid(父类是Node2D)，访问格子时可以访问到它的坐标，移动消耗，同时有一个格子管理器GridManager(父类是Node)，所有格子都是这个管理器的子节点</p>
<p>我们要求Astar脚本的核心功能：输入起点和终点坐标，格子管理器的引用，若寻路成功，输出下一步要移动到的格子坐标</p>
<p>步骤如下：</p>
<ol>
<li>把起点放入开启列表中</li>
<li>开始循环，在开启列表中寻找f最小的最优格，将其放入关闭列表，并从开启列表中移除（可能会存在有几个格子的情况，所以这里存储找到的格子需要是一个列表，但返回到后续过程的结果一定是一个格子，假如f相同就找h，再相同就找g，再相同就随机）</li>
<li>遍历最优格四连通区域的格子，将这些格子放入开启列表中（需要注意一下放入到开启列表中的元素，最优格的坐标会作为这些放入开启列表的格子的父级坐标一并放进去）</li>
<li>持续循环，直到开启列表为空或最优格为终点，若开启列表为空，则返回寻路失败，若最优格为终点，则寻路成功，则将终点放入关闭列表并结束循环</li>
<li>反向遍历，从关闭列表的最后一个元素（即终点）开始，访问其计算格父级坐标，与关闭列表中元素的计算格坐标比对，以此找到其父级，以此循环，知道访问到父级坐标为起点坐标时结束遍历，返回计算格坐标，即为输出</li>
</ol>
<h2>代码实现<span class="hx:absolute hx:-mt-20" id="代码实现"></span>
    <a href="#%e4%bb%a3%e7%a0%81%e5%ae%9e%e7%8e%b0" class="subheading-anchor" aria-label="此章节的永久链接"></a></h2><p>(约定地图起始格子坐标为(0,0)，那么(-1,-1)格即为不存在格，用作初始化)</p>
<p>首先我们需要明确一下格子类内包含的变量是哪些</p>
<div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">

<div><div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-GDScript" data-lang="GDScript"><span style="display:flex;"><span><span style="color:#81a1c1;font-weight:bold">extends</span> <span style="color:#8fbcbb">Node_2D</span>
</span></span><span style="display:flex;"><span><span style="color:#81a1c1;font-weight:bold">class_name</span> <span style="color:#8fbcbb">Grid</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#81a1c1;font-weight:bold">var</span> index <span style="color:#eceff4">:</span> <span style="color:#8fbcbb">Vector2i</span>
</span></span><span style="display:flex;"><span><span style="color:#81a1c1;font-weight:bold">var</span> cost <span style="color:#eceff4">:</span> <span style="color:#81a1c1">float</span>
</span></span><span style="display:flex;"><span><span style="color:#81a1c1;font-weight:bold">var</span> parent <span style="color:#eceff4">:</span> GridManager
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#81a1c1;font-weight:bold">func</span> <span style="color:#88c0d0">initialize</span><span style="color:#eceff4">(</span>parameter <span style="color:#eceff4">:</span> GridManager<span style="color:#eceff4">)</span> <span style="color:#81a1c1">-&gt;</span> <span style="color:#81a1c1">void</span><span style="color:#eceff4">:</span>
</span></span><span style="display:flex;"><span>	parent <span style="color:#81a1c1">=</span> parameter
</span></span><span style="display:flex;"><span>	<span style="color:#616e87;font-style:italic">#这里是依赖注入的写法，写习惯了带一笔</span></span></span></code></pre></div></div><div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
  <button
    class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
    title="复制代码"
    aria-label="复制代码"
    data-copied-label="已复制！"
  >
    <div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4"></div>
<div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4"></div>
  </button>
</div>
</div>
<p>接下来是GridManager的脚本，A*算法主要得从这里根据坐标返回格子对象</p>
<div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">

<div><div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-GDScript" data-lang="GDScript"><span style="display:flex;"><span><span style="color:#81a1c1;font-weight:bold">extends</span> <span style="color:#8fbcbb">Node</span>
</span></span><span style="display:flex;"><span><span style="color:#81a1c1;font-weight:bold">class_name</span> <span style="color:#8fbcbb">GridManager</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#81a1c1;font-weight:bold">var</span> parent <span style="color:#eceff4">:</span> <span style="color:#8fbcbb">Node</span> <span style="color:#616e87;font-style:italic">#这里的是GridManager的父级</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#81a1c1;font-weight:bold">func</span> <span style="color:#88c0d0">initialize</span><span style="color:#eceff4">(</span>parameter <span style="color:#eceff4">:</span> <span style="color:#8fbcbb">Node</span><span style="color:#eceff4">)</span> <span style="color:#81a1c1">-&gt;</span> <span style="color:#81a1c1">void</span><span style="color:#eceff4">:</span>
</span></span><span style="display:flex;"><span>	parent <span style="color:#81a1c1">=</span> parameter
</span></span><span style="display:flex;"><span>	<span style="color:#81a1c1;font-weight:bold">for</span> child <span style="color:#81a1c1;font-weight:bold">in</span> <span style="color:#88c0d0">get_children</span><span style="color:#eceff4">():</span>
</span></span><span style="display:flex;"><span>			<span style="color:#81a1c1;font-weight:bold">if</span> child <span style="color:#81a1c1;font-weight:bold">is</span> Grid<span style="color:#eceff4">:</span>
</span></span><span style="display:flex;"><span>				child<span style="color:#81a1c1">.</span><span style="color:#88c0d0">initialize</span><span style="color:#eceff4">(</span><span style="color:#81a1c1">self</span><span style="color:#eceff4">)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#81a1c1;font-weight:bold">func</span> <span style="color:#88c0d0">index2grid</span><span style="color:#eceff4">(</span>index <span style="color:#eceff4">:</span> <span style="color:#8fbcbb">Vector2i</span><span style="color:#eceff4">)</span> <span style="color:#81a1c1">-&gt;</span> Grid<span style="color:#eceff4">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#81a1c1;font-weight:bold">for</span> child <span style="color:#81a1c1;font-weight:bold">in</span> <span style="color:#88c0d0">get_children</span><span style="color:#eceff4">():</span>
</span></span><span style="display:flex;"><span>		<span style="color:#81a1c1;font-weight:bold">if</span> child <span style="color:#81a1c1;font-weight:bold">is</span> Grid<span style="color:#eceff4">:</span>
</span></span><span style="display:flex;"><span>			<span style="color:#81a1c1;font-weight:bold">if</span> child<span style="color:#81a1c1">.</span>index <span style="color:#81a1c1">==</span> index<span style="color:#eceff4">:</span>
</span></span><span style="display:flex;"><span>				<span style="color:#81a1c1;font-weight:bold">return</span> child</span></span></code></pre></div></div><div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
  <button
    class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
    title="复制代码"
    aria-label="复制代码"
    data-copied-label="已复制！"
  >
    <div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4"></div>
<div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4"></div>
  </button>
</div>
</div>
<p>接下来就是寻路算法的核心脚本，输入管理器、起点和终点坐标，输出接下来要走的坐标，具体看注释，这里不赘述了</p>
<div class="hextra-code-block hx:relative hx:mt-6 hx:first:mt-0 hx:group/code">

<div><div class="highlight"><pre tabindex="0" style="color:#d8dee9;background-color:#2e3440;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-GDScript" data-lang="GDScript"><span style="display:flex;"><span><span style="color:#81a1c1;font-weight:bold">extends</span> <span style="color:#8fbcbb">Node</span>
</span></span><span style="display:flex;"><span><span style="color:#81a1c1;font-weight:bold">class_name</span> <span style="color:#8fbcbb">AStar</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#81a1c1;font-weight:bold">func</span> <span style="color:#88c0d0">main</span><span style="color:#eceff4">(</span>grid_manager <span style="color:#eceff4">:</span> GridManager <span style="color:#eceff4">,</span> start_index <span style="color:#eceff4">:</span> <span style="color:#8fbcbb">Vector2i</span> <span style="color:#eceff4">,</span> end_index <span style="color:#eceff4">:</span> <span style="color:#8fbcbb">Vector2i</span><span style="color:#eceff4">)</span> <span style="color:#81a1c1">-&gt;</span> <span style="color:#8fbcbb">Vector2i</span><span style="color:#eceff4">:</span> <span style="color:#616e87;font-style:italic">#明确算法的输入输出</span>
</span></span><span style="display:flex;"><span>	<span style="color:#81a1c1;font-weight:bold">var</span> result <span style="color:#eceff4">:</span> <span style="color:#8fbcbb">Vector2i</span> <span style="color:#616e87;font-style:italic">#结果</span>
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	<span style="color:#81a1c1;font-weight:bold">var</span> open_list <span style="color:#eceff4">:</span> <span style="color:#8fbcbb">Dictionary</span>
</span></span><span style="display:flex;"><span>	<span style="color:#81a1c1;font-weight:bold">var</span> close_list <span style="color:#eceff4">:</span> <span style="color:#8fbcbb">Dictionary</span>
</span></span><span style="display:flex;"><span>	<span style="color:#616e87;font-style:italic">#这里明确这两个list中的数据结构分别为{计算点坐标 : [[计算点父级坐标] , [f,g,h]]}和{计算点坐标 : 计算点父级坐标}</span>
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	open_list<span style="color:#eceff4">[</span>start_index<span style="color:#eceff4">]</span> <span style="color:#81a1c1">=</span> <span style="color:#eceff4">[[</span><span style="color:#8fbcbb">Vector2i</span><span style="color:#eceff4">(</span><span style="color:#81a1c1">-</span><span style="color:#b48ead">1</span><span style="color:#eceff4">,</span><span style="color:#81a1c1">-</span><span style="color:#b48ead">1</span><span style="color:#eceff4">)]</span> <span style="color:#eceff4">,</span> <span style="color:#eceff4">[</span><span style="color:#88c0d0">get_MHD</span><span style="color:#eceff4">(</span>start_index <span style="color:#eceff4">,</span> end_index<span style="color:#eceff4">),</span><span style="color:#b48ead">0</span><span style="color:#eceff4">,</span><span style="color:#88c0d0">get_MHD</span><span style="color:#eceff4">(</span>start_index <span style="color:#eceff4">,</span> end_index<span style="color:#eceff4">)]]</span>
</span></span><span style="display:flex;"><span>	<span style="color:#616e87;font-style:italic">#初始化open_list</span>
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	<span style="color:#81a1c1;font-weight:bold">var</span> end_flag <span style="color:#eceff4">:</span> <span style="color:#81a1c1">bool</span> <span style="color:#81a1c1">=</span> <span style="color:#81a1c1;font-weight:bold">false</span>
</span></span><span style="display:flex;"><span>	<span style="color:#81a1c1;font-weight:bold">while</span> end_flag <span style="color:#81a1c1">==</span> <span style="color:#81a1c1;font-weight:bold">false</span><span style="color:#eceff4">:</span>
</span></span><span style="display:flex;"><span>		<span style="color:#81a1c1;font-weight:bold">var</span> best_element_index <span style="color:#eceff4">:</span> <span style="color:#8fbcbb">Vector2i</span> <span style="color:#81a1c1">=</span> <span style="color:#88c0d0">get_best_element_index</span><span style="color:#eceff4">(</span>open_list<span style="color:#eceff4">)</span>
</span></span><span style="display:flex;"><span>		<span style="color:#81a1c1;font-weight:bold">var</span> best_element_parent_index <span style="color:#eceff4">:</span> <span style="color:#8fbcbb">Vector2i</span> <span style="color:#81a1c1">=</span> open_list<span style="color:#eceff4">[</span>best_element_index<span style="color:#eceff4">][</span><span style="color:#b48ead">0</span><span style="color:#eceff4">][</span><span style="color:#b48ead">0</span><span style="color:#eceff4">]</span>
</span></span><span style="display:flex;"><span>		<span style="color:#616e87;font-style:italic">#以上是对open_list的处理</span>
</span></span><span style="display:flex;"><span>		
</span></span><span style="display:flex;"><span>		close_list<span style="color:#eceff4">[</span>best_element_index<span style="color:#eceff4">]</span> <span style="color:#81a1c1">=</span> best_element_parent_index
</span></span><span style="display:flex;"><span>		<span style="color:#616e87;font-style:italic">#把最优格放入close_list</span>
</span></span><span style="display:flex;"><span>		
</span></span><span style="display:flex;"><span>		<span style="color:#81a1c1;font-weight:bold">var</span> cross_grids_index <span style="color:#eceff4">:</span> <span style="color:#8fbcbb">Array</span><span style="color:#eceff4">[</span><span style="color:#8fbcbb">Vector2i</span><span style="color:#eceff4">]</span> <span style="color:#81a1c1">=</span> <span style="color:#88c0d0">get_cross_grids_index</span><span style="color:#eceff4">(</span>grid_manager<span style="color:#eceff4">,</span>best_element_index<span style="color:#eceff4">)</span>
</span></span><span style="display:flex;"><span>		<span style="color:#81a1c1;font-weight:bold">for</span> cross_grid_index <span style="color:#81a1c1;font-weight:bold">in</span> cross_grids_index<span style="color:#eceff4">:</span>
</span></span><span style="display:flex;"><span>			
</span></span><span style="display:flex;"><span>			<span style="color:#81a1c1;font-weight:bold">var</span> cross_grid_index_dictionary <span style="color:#eceff4">:</span> <span style="color:#8fbcbb">Dictionary</span>
</span></span><span style="display:flex;"><span>			<span style="color:#616e87;font-style:italic">#数据结构为{计算点坐标 : [f,g,h]}</span>
</span></span><span style="display:flex;"><span>			
</span></span><span style="display:flex;"><span>			<span style="color:#81a1c1;font-weight:bold">var</span> g <span style="color:#eceff4">:</span> <span style="color:#81a1c1">float</span> <span style="color:#81a1c1">=</span> grid_manager<span style="color:#81a1c1">.</span><span style="color:#88c0d0">index2grid</span><span style="color:#eceff4">(</span>cross_grid_index<span style="color:#eceff4">)</span><span style="color:#81a1c1">.</span>cost <span style="color:#81a1c1">+</span> open_list<span style="color:#eceff4">[</span>best_element_index<span style="color:#eceff4">][</span><span style="color:#b48ead">1</span><span style="color:#eceff4">][</span><span style="color:#b48ead">1</span><span style="color:#eceff4">]</span>
</span></span><span style="display:flex;"><span>			<span style="color:#81a1c1;font-weight:bold">var</span> h <span style="color:#eceff4">:</span> <span style="color:#81a1c1">int</span> <span style="color:#81a1c1">=</span> <span style="color:#88c0d0">get_MHD</span><span style="color:#eceff4">(</span>cross_grid_index<span style="color:#eceff4">,</span>end_index<span style="color:#eceff4">)</span>
</span></span><span style="display:flex;"><span>			<span style="color:#81a1c1;font-weight:bold">var</span> f <span style="color:#eceff4">:</span> <span style="color:#81a1c1">float</span> <span style="color:#81a1c1">=</span> g <span style="color:#81a1c1">+</span> h
</span></span><span style="display:flex;"><span>			cross_grid_index_dictionary<span style="color:#eceff4">[</span>cross_grid_index<span style="color:#eceff4">]</span> <span style="color:#81a1c1">=</span> <span style="color:#eceff4">[</span>f<span style="color:#eceff4">,</span>g<span style="color:#eceff4">,</span>h<span style="color:#eceff4">]</span>
</span></span><span style="display:flex;"><span>			<span style="color:#616e87;font-style:italic">#这个要着重看，精髓在此</span>
</span></span><span style="display:flex;"><span>			
</span></span><span style="display:flex;"><span>			open_list<span style="color:#eceff4">[</span>cross_grid_index<span style="color:#eceff4">]</span> <span style="color:#81a1c1">=</span> <span style="color:#eceff4">[[</span>best_element_index<span style="color:#eceff4">]</span> <span style="color:#eceff4">,</span> cross_grid_index_dictionary<span style="color:#eceff4">[</span>cross_grid_index<span style="color:#eceff4">]]</span>
</span></span><span style="display:flex;"><span>			<span style="color:#616e87;font-style:italic">#处理父级</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>			<span style="color:#81a1c1;font-weight:bold">if</span> h <span style="color:#81a1c1">==</span> <span style="color:#b48ead">0</span><span style="color:#eceff4">:</span>
</span></span><span style="display:flex;"><span>				close_list<span style="color:#eceff4">[</span>end_index<span style="color:#eceff4">]</span> <span style="color:#81a1c1">=</span> best_element_index
</span></span><span style="display:flex;"><span>				end_flag <span style="color:#81a1c1">=</span> <span style="color:#81a1c1;font-weight:bold">true</span>
</span></span><span style="display:flex;"><span>				<span style="color:#81a1c1;font-weight:bold">break</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		open_list<span style="color:#81a1c1">.</span><span style="color:#88c0d0">erase</span><span style="color:#eceff4">(</span>best_element_index<span style="color:#eceff4">)</span>
</span></span><span style="display:flex;"><span>		<span style="color:#616e87;font-style:italic">#记住一定要删，不然会重复选中</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#81a1c1;font-weight:bold">if</span> open_list<span style="color:#81a1c1">.</span><span style="color:#88c0d0">size</span><span style="color:#eceff4">()</span> <span style="color:#81a1c1">==</span> <span style="color:#b48ead">0</span><span style="color:#eceff4">:</span>
</span></span><span style="display:flex;"><span>			<span style="color:#81a1c1;font-weight:bold">return</span> <span style="color:#8fbcbb">Vector2i</span><span style="color:#eceff4">(</span><span style="color:#81a1c1">-</span><span style="color:#b48ead">1</span><span style="color:#eceff4">,</span><span style="color:#81a1c1">-</span><span style="color:#b48ead">1</span><span style="color:#eceff4">)</span>
</span></span><span style="display:flex;"><span>	
</span></span><span style="display:flex;"><span>	end_flag <span style="color:#81a1c1">=</span> <span style="color:#81a1c1;font-weight:bold">false</span>
</span></span><span style="display:flex;"><span>	result <span style="color:#81a1c1">=</span> end_index
</span></span><span style="display:flex;"><span>	<span style="color:#81a1c1;font-weight:bold">while</span> end_flag <span style="color:#81a1c1">==</span> <span style="color:#81a1c1;font-weight:bold">false</span><span style="color:#eceff4">:</span>
</span></span><span style="display:flex;"><span>		<span style="color:#81a1c1;font-weight:bold">if</span> close_list<span style="color:#eceff4">[</span>result<span style="color:#eceff4">]</span> <span style="color:#81a1c1">==</span> start_index<span style="color:#eceff4">:</span>
</span></span><span style="display:flex;"><span>			end_flag <span style="color:#81a1c1">=</span> <span style="color:#81a1c1;font-weight:bold">true</span>
</span></span><span style="display:flex;"><span>			<span style="color:#81a1c1;font-weight:bold">return</span> result
</span></span><span style="display:flex;"><span>		result <span style="color:#81a1c1">=</span> close_list<span style="color:#eceff4">[</span>result<span style="color:#eceff4">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#616e87;font-style:italic">#下面补充工具函数</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#616e87;font-style:italic">#这个函数的目的是返回open_list中的最优元素的格子坐标</span>
</span></span><span style="display:flex;"><span><span style="color:#81a1c1;font-weight:bold">func</span> <span style="color:#88c0d0">get_best_element_index</span><span style="color:#eceff4">(</span>open_list <span style="color:#eceff4">:</span> <span style="color:#8fbcbb">Dictionary</span><span style="color:#eceff4">)</span> <span style="color:#81a1c1">-&gt;</span> <span style="color:#8fbcbb">Vector2i</span><span style="color:#eceff4">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#81a1c1;font-weight:bold">var</span> result <span style="color:#eceff4">:</span> <span style="color:#8fbcbb">Vector2i</span> <span style="color:#81a1c1">=</span> <span style="color:#8fbcbb">Vector2i</span><span style="color:#eceff4">(</span><span style="color:#81a1c1">-</span><span style="color:#b48ead">1</span><span style="color:#eceff4">,</span><span style="color:#81a1c1">-</span><span style="color:#b48ead">1</span><span style="color:#eceff4">)</span>
</span></span><span style="display:flex;"><span>	<span style="color:#81a1c1;font-weight:bold">var</span> f_result <span style="color:#eceff4">:</span> <span style="color:#8fbcbb">Array</span><span style="color:#eceff4">[</span><span style="color:#8fbcbb">Vector2i</span><span style="color:#eceff4">]</span> <span style="color:#81a1c1">=</span> <span style="color:#eceff4">[]</span>
</span></span><span style="display:flex;"><span>	<span style="color:#616e87;font-style:italic">#用于存储比较值可能重复的结果</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#81a1c1;font-weight:bold">var</span> calculation_index <span style="color:#eceff4">:</span> <span style="color:#8fbcbb">Array</span><span style="color:#eceff4">[</span><span style="color:#8fbcbb">Vector2i</span><span style="color:#eceff4">]</span>
</span></span><span style="display:flex;"><span>	<span style="color:#81a1c1;font-weight:bold">var</span> calculation_index_parameter <span style="color:#eceff4">:</span> <span style="color:#8fbcbb">Array</span><span style="color:#eceff4">[</span><span style="color:#8fbcbb">Array</span><span style="color:#eceff4">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#81a1c1;font-weight:bold">var</span> min_f_index_array <span style="color:#eceff4">:</span> <span style="color:#8fbcbb">Array</span><span style="color:#eceff4">[</span><span style="color:#8fbcbb">Vector2i</span><span style="color:#eceff4">]</span>
</span></span><span style="display:flex;"><span>	<span style="color:#81a1c1;font-weight:bold">var</span> min_g_index_array <span style="color:#eceff4">:</span> <span style="color:#8fbcbb">Array</span><span style="color:#eceff4">[</span><span style="color:#8fbcbb">Vector2i</span><span style="color:#eceff4">]</span>
</span></span><span style="display:flex;"><span>	<span style="color:#81a1c1;font-weight:bold">var</span> min_h_index_array <span style="color:#eceff4">:</span> <span style="color:#8fbcbb">Array</span><span style="color:#eceff4">[</span><span style="color:#8fbcbb">Vector2i</span><span style="color:#eceff4">]</span>
</span></span><span style="display:flex;"><span>	<span style="color:#81a1c1;font-weight:bold">for</span> key <span style="color:#81a1c1;font-weight:bold">in</span> open_list<span style="color:#81a1c1">.</span><span style="color:#88c0d0">keys</span><span style="color:#eceff4">():</span>
</span></span><span style="display:flex;"><span>		calculation_index<span style="color:#81a1c1">.</span><span style="color:#88c0d0">append</span><span style="color:#eceff4">(</span>key<span style="color:#eceff4">)</span>
</span></span><span style="display:flex;"><span>		calculation_index_parameter<span style="color:#81a1c1">.</span><span style="color:#88c0d0">append</span><span style="color:#eceff4">(</span>open_list<span style="color:#eceff4">[</span>key<span style="color:#eceff4">][</span><span style="color:#b48ead">1</span><span style="color:#eceff4">])</span>
</span></span><span style="display:flex;"><span>	<span style="color:#81a1c1;font-weight:bold">for</span> index <span style="color:#81a1c1;font-weight:bold">in</span> calculation_index<span style="color:#eceff4">:</span>
</span></span><span style="display:flex;"><span>		<span style="color:#81a1c1;font-weight:bold">if</span> result <span style="color:#81a1c1">==</span> <span style="color:#8fbcbb">Vector2i</span><span style="color:#eceff4">(</span><span style="color:#81a1c1">-</span><span style="color:#b48ead">1</span><span style="color:#eceff4">,</span><span style="color:#81a1c1">-</span><span style="color:#b48ead">1</span><span style="color:#eceff4">):</span>
</span></span><span style="display:flex;"><span>			result <span style="color:#81a1c1">=</span> index
</span></span><span style="display:flex;"><span>			<span style="color:#616e87;font-style:italic">#这里是初始化</span>
</span></span><span style="display:flex;"><span>		
</span></span><span style="display:flex;"><span>		<span style="color:#81a1c1;font-weight:bold">var</span> num <span style="color:#eceff4">:</span> <span style="color:#81a1c1">int</span> <span style="color:#81a1c1">=</span> calculation_index<span style="color:#81a1c1">.</span><span style="color:#88c0d0">find</span><span style="color:#eceff4">(</span>index<span style="color:#eceff4">)</span>
</span></span><span style="display:flex;"><span>		<span style="color:#616e87;font-style:italic">#这个是计算点坐标的索引</span>
</span></span><span style="display:flex;"><span>		
</span></span><span style="display:flex;"><span>		<span style="color:#81a1c1;font-weight:bold">var</span> result_num <span style="color:#eceff4">:</span> <span style="color:#81a1c1">int</span> <span style="color:#81a1c1">=</span> <span style="color:#b48ead">0</span>
</span></span><span style="display:flex;"><span>		<span style="color:#81a1c1;font-weight:bold">if</span> calculation_index_parameter<span style="color:#eceff4">[</span>num<span style="color:#eceff4">][</span><span style="color:#b48ead">0</span><span style="color:#eceff4">]</span> <span style="color:#81a1c1">&lt;=</span> calculation_index_parameter<span style="color:#eceff4">[</span>result_num<span style="color:#eceff4">][</span><span style="color:#b48ead">0</span><span style="color:#eceff4">]:</span>
</span></span><span style="display:flex;"><span>			result <span style="color:#81a1c1">=</span> calculation_index<span style="color:#eceff4">[</span>num<span style="color:#eceff4">]</span>
</span></span><span style="display:flex;"><span>			result_num <span style="color:#81a1c1">=</span> num
</span></span><span style="display:flex;"><span>			f_result<span style="color:#81a1c1">.</span><span style="color:#88c0d0">append</span><span style="color:#eceff4">(</span>result<span style="color:#eceff4">)</span>
</span></span><span style="display:flex;"><span>	<span style="color:#81a1c1;font-weight:bold">if</span> f_result<span style="color:#81a1c1">.</span><span style="color:#88c0d0">size</span><span style="color:#eceff4">()</span> <span style="color:#81a1c1">==</span> <span style="color:#b48ead">1</span><span style="color:#eceff4">:</span>
</span></span><span style="display:flex;"><span>		<span style="color:#81a1c1;font-weight:bold">return</span> result
</span></span><span style="display:flex;"><span>	<span style="color:#81a1c1;font-weight:bold">else</span><span style="color:#eceff4">:</span>
</span></span><span style="display:flex;"><span>		<span style="color:#81a1c1;font-weight:bold">var</span> g_result <span style="color:#eceff4">:</span> <span style="color:#8fbcbb">Array</span><span style="color:#eceff4">[</span><span style="color:#8fbcbb">Vector2i</span><span style="color:#eceff4">]</span> <span style="color:#81a1c1">=</span> <span style="color:#eceff4">[]</span>
</span></span><span style="display:flex;"><span>		<span style="color:#81a1c1;font-weight:bold">for</span> index <span style="color:#81a1c1;font-weight:bold">in</span> f_result<span style="color:#eceff4">:</span>
</span></span><span style="display:flex;"><span>			<span style="color:#81a1c1;font-weight:bold">var</span> num <span style="color:#eceff4">:</span> <span style="color:#81a1c1">int</span> <span style="color:#81a1c1">=</span> calculation_index<span style="color:#81a1c1">.</span><span style="color:#88c0d0">find</span><span style="color:#eceff4">(</span>index<span style="color:#eceff4">)</span>
</span></span><span style="display:flex;"><span>			<span style="color:#81a1c1;font-weight:bold">var</span> result_num <span style="color:#eceff4">:</span> <span style="color:#81a1c1">int</span> <span style="color:#81a1c1">=</span> <span style="color:#b48ead">0</span>
</span></span><span style="display:flex;"><span>			<span style="color:#81a1c1;font-weight:bold">if</span> calculation_index_parameter<span style="color:#eceff4">[</span>num<span style="color:#eceff4">][</span><span style="color:#b48ead">1</span><span style="color:#eceff4">]</span> <span style="color:#81a1c1">&lt;=</span> calculation_index_parameter<span style="color:#eceff4">[</span>result_num<span style="color:#eceff4">][</span><span style="color:#b48ead">1</span><span style="color:#eceff4">]:</span>
</span></span><span style="display:flex;"><span>				result <span style="color:#81a1c1">=</span> calculation_index<span style="color:#eceff4">[</span>num<span style="color:#eceff4">]</span>
</span></span><span style="display:flex;"><span>				result_num <span style="color:#81a1c1">=</span> num
</span></span><span style="display:flex;"><span>				g_result<span style="color:#81a1c1">.</span><span style="color:#88c0d0">append</span><span style="color:#eceff4">(</span>result<span style="color:#eceff4">)</span>
</span></span><span style="display:flex;"><span>		<span style="color:#81a1c1;font-weight:bold">if</span> g_result<span style="color:#81a1c1">.</span><span style="color:#88c0d0">size</span><span style="color:#eceff4">()</span> <span style="color:#81a1c1">==</span> <span style="color:#b48ead">1</span><span style="color:#eceff4">:</span>
</span></span><span style="display:flex;"><span>			<span style="color:#81a1c1;font-weight:bold">return</span> result
</span></span><span style="display:flex;"><span>		<span style="color:#81a1c1;font-weight:bold">else</span><span style="color:#eceff4">:</span>
</span></span><span style="display:flex;"><span>			<span style="color:#81a1c1;font-weight:bold">var</span> h_result <span style="color:#eceff4">:</span> <span style="color:#8fbcbb">Array</span><span style="color:#eceff4">[</span><span style="color:#8fbcbb">Vector2i</span><span style="color:#eceff4">]</span> <span style="color:#81a1c1">=</span> <span style="color:#eceff4">[]</span>
</span></span><span style="display:flex;"><span>			<span style="color:#81a1c1;font-weight:bold">for</span> index <span style="color:#81a1c1;font-weight:bold">in</span> g_result<span style="color:#eceff4">:</span>
</span></span><span style="display:flex;"><span>				<span style="color:#81a1c1;font-weight:bold">if</span> calculation_index_parameter<span style="color:#eceff4">[</span>num<span style="color:#eceff4">][</span><span style="color:#b48ead">2</span><span style="color:#eceff4">]</span> <span style="color:#81a1c1">&lt;=</span> calculation_index_parameter<span style="color:#eceff4">[</span>result_num<span style="color:#eceff4">][</span><span style="color:#b48ead">2</span><span style="color:#eceff4">]:</span>
</span></span><span style="display:flex;"><span>					result <span style="color:#81a1c1">=</span> calculation_index<span style="color:#eceff4">[</span>num<span style="color:#eceff4">]</span>
</span></span><span style="display:flex;"><span>					result_num <span style="color:#81a1c1">=</span> num
</span></span><span style="display:flex;"><span>					h_result<span style="color:#81a1c1">.</span><span style="color:#88c0d0">append</span><span style="color:#eceff4">(</span>result<span style="color:#eceff4">)</span>
</span></span><span style="display:flex;"><span>			<span style="color:#81a1c1;font-weight:bold">if</span> h_result<span style="color:#81a1c1">.</span><span style="color:#88c0d0">size</span><span style="color:#eceff4">()</span> <span style="color:#81a1c1">==</span> <span style="color:#b48ead">1</span><span style="color:#eceff4">:</span>
</span></span><span style="display:flex;"><span>				<span style="color:#81a1c1;font-weight:bold">return</span> result
</span></span><span style="display:flex;"><span>			<span style="color:#81a1c1;font-weight:bold">else</span><span style="color:#eceff4">:</span>
</span></span><span style="display:flex;"><span>				<span style="color:#81a1c1;font-weight:bold">var</span> size <span style="color:#81a1c1">=</span> h_result<span style="color:#81a1c1">.</span><span style="color:#88c0d0">size</span><span style="color:#eceff4">()</span>
</span></span><span style="display:flex;"><span>				<span style="color:#81a1c1;font-weight:bold">var</span> random_num <span style="color:#81a1c1">=</span> <span style="color:#81a1c1">randi</span><span style="color:#eceff4">(</span><span style="color:#b48ead">0</span><span style="color:#eceff4">,</span>size<span style="color:#eceff4">)</span>
</span></span><span style="display:flex;"><span>				<span style="color:#81a1c1;font-weight:bold">return</span> h_result<span style="color:#eceff4">[</span>random_num<span style="color:#eceff4">]</span>
</span></span><span style="display:flex;"><span><span style="color:#616e87;font-style:italic">#这里的f,g,h属实屎山了,但没办法,为了理解简单就这样写吧，反正就是优先找f最小，然后g最小，最后h最小，假如有都相同的，那就随机返回</span>
</span></span><span style="display:flex;"><span>		
</span></span><span style="display:flex;"><span><span style="color:#616e87;font-style:italic">#这个函数的目的是返回目标坐标四连通区域的格子坐标</span>
</span></span><span style="display:flex;"><span><span style="color:#81a1c1;font-weight:bold">func</span> <span style="color:#88c0d0">get_cross_grids_index</span><span style="color:#eceff4">(</span>grid_manager <span style="color:#eceff4">:</span> GridManager<span style="color:#eceff4">,</span>best_element_index <span style="color:#eceff4">:</span> <span style="color:#8fbcbb">Vector2i</span><span style="color:#eceff4">)</span> <span style="color:#81a1c1">-&gt;</span> <span style="color:#8fbcbb">Array</span><span style="color:#eceff4">[</span><span style="color:#8fbcbb">Vector2i</span><span style="color:#eceff4">]:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#81a1c1;font-weight:bold">var</span> result <span style="color:#eceff4">:</span> <span style="color:#8fbcbb">Array</span><span style="color:#eceff4">[</span><span style="color:#8fbcbb">Vector2i</span><span style="color:#eceff4">]</span>
</span></span><span style="display:flex;"><span>	<span style="color:#81a1c1;font-weight:bold">var</span> directions <span style="color:#eceff4">:</span> <span style="color:#8fbcbb">Array</span><span style="color:#eceff4">[</span><span style="color:#8fbcbb">Vector2i</span><span style="color:#eceff4">]</span> <span style="color:#81a1c1">=</span> <span style="color:#eceff4">[</span><span style="color:#8fbcbb">Vector2i</span><span style="color:#eceff4">(</span><span style="color:#b48ead">0</span><span style="color:#eceff4">,</span><span style="color:#b48ead">1</span><span style="color:#eceff4">),</span><span style="color:#8fbcbb">Vector2i</span><span style="color:#eceff4">(</span><span style="color:#b48ead">0</span><span style="color:#eceff4">,</span><span style="color:#81a1c1">-</span><span style="color:#b48ead">1</span><span style="color:#eceff4">),</span><span style="color:#8fbcbb">Vector2i</span><span style="color:#eceff4">(</span><span style="color:#81a1c1">-</span><span style="color:#b48ead">1</span><span style="color:#eceff4">,</span><span style="color:#b48ead">0</span><span style="color:#eceff4">),</span><span style="color:#8fbcbb">Vector2i</span><span style="color:#eceff4">(</span><span style="color:#b48ead">1</span><span style="color:#eceff4">,</span><span style="color:#b48ead">0</span><span style="color:#eceff4">)]</span>
</span></span><span style="display:flex;"><span>	<span style="color:#81a1c1;font-weight:bold">for</span> direction <span style="color:#81a1c1;font-weight:bold">in</span> directions<span style="color:#eceff4">:</span>
</span></span><span style="display:flex;"><span>		target <span style="color:#eceff4">:</span> <span style="color:#8fbcbb">Vector2i</span> <span style="color:#81a1c1">=</span> best_element_index <span style="color:#81a1c1">+</span> direction
</span></span><span style="display:flex;"><span>		<span style="color:#81a1c1;font-weight:bold">if</span> grid_manager<span style="color:#81a1c1">.</span><span style="color:#88c0d0">index2grid</span><span style="color:#eceff4">(</span>target<span style="color:#eceff4">):</span>
</span></span><span style="display:flex;"><span>			result<span style="color:#81a1c1">.</span><span style="color:#88c0d0">append</span><span style="color:#eceff4">(</span>target<span style="color:#eceff4">)</span>
</span></span><span style="display:flex;"><span>	<span style="color:#81a1c1;font-weight:bold">return</span> result
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#616e87;font-style:italic">#这个函数的目的是得到两个坐标间的曼哈顿距离</span>
</span></span><span style="display:flex;"><span><span style="color:#81a1c1;font-weight:bold">func</span> <span style="color:#88c0d0">get_MHD</span><span style="color:#eceff4">(</span>start_index <span style="color:#eceff4">:</span> <span style="color:#8fbcbb">Vector2i</span><span style="color:#eceff4">,</span>end_index <span style="color:#eceff4">:</span> <span style="color:#8fbcbb">Vector2i</span><span style="color:#eceff4">)</span> <span style="color:#81a1c1">-&gt;</span> <span style="color:#81a1c1">int</span><span style="color:#eceff4">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#81a1c1;font-weight:bold">return</span> <span style="color:#81a1c1">abs</span><span style="color:#eceff4">(</span>start_index<span style="color:#81a1c1">.</span>x <span style="color:#81a1c1">-</span> end_index<span style="color:#81a1c1">.</span>x<span style="color:#eceff4">)</span><span style="color:#81a1c1">+</span><span style="color:#81a1c1">abs</span><span style="color:#eceff4">(</span>start_index<span style="color:#81a1c1">.</span>y <span style="color:#81a1c1">-</span> end_index<span style="color:#81a1c1">.</span>y<span style="color:#eceff4">)</span></span></span></code></pre></div></div><div class="hextra-code-copy-btn-container hx:opacity-0 hx:transition hx:group-hover/code:opacity-100 hx:flex hx:gap-1 hx:absolute hx:m-[11px] hx:right-0 hx:top-0">
  <button
    class="hextra-code-copy-btn hx:group/copybtn hx:cursor-pointer hx:transition-all hx:active:opacity-50 hx:bg-primary-700/5 hx:border hx:border-black/5 hx:text-gray-600 hx:hover:text-gray-900 hx:rounded-md hx:p-1.5 hx:dark:bg-primary-300/10 hx:dark:border-white/10 hx:dark:text-gray-400 hx:dark:hover:text-gray-50"
    title="复制代码"
    aria-label="复制代码"
    data-copied-label="已复制！"
  >
    <div class="hextra-copy-icon hx:group-[.copied]/copybtn:hidden hx:pointer-events-none hx:h-4 hx:w-4"></div>
<div class="hextra-success-icon hx:hidden hx:group-[.copied]/copybtn:block hx:pointer-events-none hx:h-4 hx:w-4"></div>
  </button>
</div>
</div>
<p>英明神武的ai大人告诉我我写的代码非常屎，是的，它是对的，以上的代码仅仅停留在能看和能用的阶段，距离好用还差很长的一段距离，比如其中某些函数有更好的写法，某些地方缺乏健壮性等（其实我不喜欢这个词，我就理解为更安全更经得住乱造）</p>
<p>但没关系，本篇仅供用于参考A*算法的思路，至于写进游戏，还需要更多的适配性（比如Grid和GridManager还需要优化等）</p>
<p>（狗头叠甲）</p>
<hr>
<p>以上</p>

        </div>
        
    <div class="hx:mt-12 hx:mb-8 hx:block hx:text-xs hx:text-gray-500 hx:ltr:text-right hx:rtl:text-left hx:dark:text-gray-400">
      最后更新于 <time datetime="2025-12-03T00:00:00.000Z">2025年12月3日</time></div><div class="hx:mb-8 hx:flex hx:items-center hx:border-t hx:pt-8 hx:border-gray-200 hx:dark:border-neutral-800 hx:contrast-more:border-neutral-400 hx:dark:contrast-more:border-neutral-400 hx:print:hidden"><a
        href="/tech/ai_decision_tree_state_machine_behavior_tree_htn_goap/"
        title="AI决策-状态机&#43;行为树&#43;HTN&#43;GOAP"
        class="hx:flex hx:max-w-[50%] hx:items-center hx:gap-1 hx:py-4 hx:text-base hx:font-medium hx:text-gray-600 hx:transition-colors [word-break:break-word] hx:hover:text-primary-600 hx:dark:text-gray-300 hx:md:text-lg hx:ltr:pr-4 hx:rtl:pl-4"
      ><svg class="hx:inline hx:h-5 hx:shrink-0 hx:ltr:rotate-180" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"/></svg>AI决策-状态机&#43;行为树&#43;HTN&#43;GOAP</a><a
        href="/tech/godot_code_framework/"
        title="Godot或许合格的程序架构"
        class="hx:flex hx:max-w-[50%] hx:items-center hx:gap-1 hx:py-4 hx:text-base hx:font-medium hx:text-gray-600 hx:transition-colors [word-break:break-word] hx:hover:text-primary-600 hx:dark:text-gray-300 hx:md:text-lg hx:ltr:ml-auto hx:ltr:pl-4 hx:ltr:text-right hx:rtl:mr-auto hx:rtl:pr-4 hx:rtl:text-left"
      >Godot或许合格的程序架构<svg class="hx:inline hx:h-5 hx:shrink-0 hx:rtl:-rotate-180" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"/></svg></a></div>
      </main>
    </article>
  </div>

      <footer class="hextra-footer hx:bg-gray-100 hx:pb-[env(safe-area-inset-bottom)] hx:dark:bg-neutral-900 hx:print:bg-transparent"><div class="hextra-custom-footer hextra-max-footer-width hx:pl-[max(env(safe-area-inset-left),1.5rem)] hx:pr-[max(env(safe-area-inset-right),1.5rem)] hx:text-gray-600 hx:dark:text-gray-400"></div><div
      class="hextra-max-footer-width hx:mx-auto hx:flex hx:justify-center hx:py-12 hx:pl-[max(env(safe-area-inset-left),1.5rem)] hx:pr-[max(env(safe-area-inset-right),1.5rem)] hx:text-gray-600 hx:dark:text-gray-400 hx:md:justify-start"
    >
      <div class="hx:flex hx:w-full hx:flex-col hx:items-center hx:sm:items-start"><div class="hx:font-semibold"><a class="hx:flex hx:text-sm hx:items-center hx:gap-1 hx:text-current" target="_blank" rel="noopener noreferrer" title="Hextra GitHub Homepage" href="https://github.com/imfing/hextra">
    <span>由 Hextra 提供支持<svg height=1em class="hx:inline-block hx:ltr:ml-1 hx:rtl:mr-1 hx:align-[-2.5px]" viewBox="0 0 180 180" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path fill-rule="evenodd" clip-rule="evenodd" d="m 105.50024,22.224647 c -9.59169,-5.537563 -21.40871,-5.537563 -31.000093,0 L 39.054693,42.689119 C 29.463353,48.226675 23.55484,58.460531 23.55484,69.535642 v 40.928918 c 0,11.07542 5.908513,21.3092 15.499853,26.84652 l 35.445453,20.46446 c 9.591313,5.53732 21.408404,5.53732 31.000094,0 l 35.44507,-20.46446 c 9.59131,-5.53732 15.49985,-15.7711 15.49985,-26.84652 V 69.535642 c 0,-11.075111 -5.90854,-21.308967 -15.49985,-26.846523 z M 34.112797,85.737639 c -1.384445,2.397827 -1.384445,5.352099 0,7.749927 l 24.781554,42.922974 c 1.38437,2.39783 3.942853,3.87496 6.711592,3.87496 h 49.563107 c 2.76905,0 5.3273,-1.47713 6.71144,-3.87496 l 24.78194,-42.922974 c 1.38414,-2.397828 1.38414,-5.3521 0,-7.749927 L 121.88049,42.814746 c -1.38414,-2.397828 -3.94239,-3.874964 -6.71144,-3.874964 H 65.605944 c -2.768739,0 -5.327223,1.477059 -6.711592,3.874964 z" style="stroke-width:0.774993" /></svg></span>
  </a></div><div class="hx:mt-6 hx:text-xs">© 2025 YUYI <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/."target="_blank" rel="noopener">lisence ↗</a></div></div>
    </div></footer>
    
    <script defer src="/js/main.js" integrity=""></script>
<script defer src="/js/flexsearch.9f5b5908f93ae86f1ecd4b043b799f580c2d1654e703dd9357d568ac41b2547a.js" integrity="sha256-n1tZCPk66G8ezUsEO3mfWAwtFlTnA92TV9VorEGyVHo=" crossorigin="anonymous"></script>
        <script defer src="/zh-cn.search.js" integrity=""></script>
  </body>
</html>
